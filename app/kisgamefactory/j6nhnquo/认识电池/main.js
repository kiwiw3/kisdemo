function runkisgame(){var _=kisgame.KISContainer;var $=kisgame.KISSprite;var a=kisgame.Bitmap;var b=kisgame.List;function c(){var m=this;var l=m;l.k_ctor();l.cuin();delete l.cuin;l.draw()}KISU.extend(c,_);var d={SPEAK:0,GOOD:1,ERROR:2,BAD:3};c.prototype.startProject=function(){var l=this;l.organ_mc.visible=false;l.role_mc.visible=true;var m=l.getObjConst(l.role_mc);l.role_mc.turn(l.width/2,m.cy);l.addETL(KISU.md,function(n){var l=this;n.currentTarget.removeETL(n.type,arguments.callee,l);l.closeFingerTips();l.playSound1("organid8.mp3");var o=l.getObjVars(l.role_mc);o.flyed=true;var m=l.getObjConst(l.role_mc);l.role_mc.flyTo2(0,-20,m.cx,-1,1,{ease:l.easeExpoIn,apply:l}).call(l.ready2StartExam)},l);l.callLaterFrame(l.checkTips,3*30)};c.prototype.ready2StartExam=function(){var m=this;var l=m.organ_mc.d0_mc;var n=m.organ_mc.d1_mc;m.role_mc.visible=false;m.organ_mc.visible=true;var o=m.getObjConst(m.organ_mc);m.organ_mc.y=-m.organ_mc.getBounds().height;TweenMotion.to(m.organ_mc,1,{y:o.y,ease:m.easeBounceOut,apply:m}).call(function(){var m=this;l.visible=n.visible=true;var p=m.parent.getBounds(m.organ_mc);var q=m.getObjConst(l);l.move(q.x2,p.y-q.rect.height);TweenMotion.to(l,1,{y:q.y2,ease:m.easeBounceOut});var q=m.getObjConst(n);n.move(q.x2,p.y-q.rect.height);TweenMotion.to(n,1,{delay:0.2,y:q.y2,ease:m.easeBounceOut});var r=m.getObjVars(m.role_mc);r.limitY=false;var q=m.getObjConst(m.role_mc);m.role_mc.visible=true;m.role_mc.flyTo(q.cx,-1,q.cx,q.cy,1,{apply:m}).call(m.firstTips)});m.playSound1("organid7.mp3")};c.prototype.firstTips=function(){var l=this;l.playSound("organid1.mp3")};c.prototype.checkTips=function(){var l=this;l.clearLaterFrame(l.checkTips);var m=l.getObjVars(l.organ_mc);var n=l.getObjVars(l.role_mc);if(!n.flyed){var o=l.role_mc.bird_mc.getBounds(l);l.showFingerTip({loop:2,steps:[["click",o.x+o.width/2,o.y+10]]})}else if(m.clickedKey){if(l.getOrganPower()){return}else{l.showDCTip()}}else{l.showKeyTip()}l.callLaterFrame(l.checkTips,10*30)};c.prototype.showKeyTip=function(){var m=this;var l=m.organ_mc.k0_mc;var n=l.getBounds();var o=m.organ_mc.local2Target(m,null,[{x:l.x,y:l.y+n.height/2+40}]);m.showFingerTip({loop:2,steps:[["click",o[0].x,o[0].y]]})};c.prototype.showDCTip=function(){var m=this;var l=m.organ_mc.d0_mc;var n=m.organ_mc.d1_mc;if(l.isDragging()||n.isDragging())return;var o=m.getObjVars(l);var p=m.getObjVars(n);var q=m.getObjConst(l);var r=m.getObjConst(n);var s=[q,r];var t=s.length;for(var u=0;u<t;u++){var v=s[u];if(!v.hotPuted){var w=null;var x=true;if(!o.isOn&&l.rotation==v.rotation){w=l}else if(!p.isOn&&n.rotation==v.rotation){w=n}else{x=false;if(!o.isOn&&l.rotation!=v.rotation){w=l}else if(!p.isOn&&n.rotation!=v.rotation){w=n}}if(x){var y=m.organ_mc.local2Target(m,null,[{x:w.x,y:w.y},{x:v.x,y:v.y}]);m.showFingerTip({loop:4,steps:[["drag",y[0].x,y[0].y,y[1].x,y[1].y]]})}else{var y=m.organ_mc.local2Target(m,null,[{x:w.x+q.rect.width/3,y:w.y}]);m.showFingerTip({loop:4,steps:[["click",y[0].x,y[0].y]]})}break}}};c.prototype.showFingerTip=function(l){var n=this;var m=n.fingerTips;m.setData(l);n.addChild(m)};c.prototype.closeFingerTips=function(){var l=this;l.callLaterFrame(l.checkTips,(l.organ_mc.visible?10:3)*30);l.fingerTips.stopStep()};c.prototype.onDCDown=function(l){var m=this;m.closeFingerTips();var n=l.currentTarget;n.parent.addChild(n);var o=m.getObjVars(n);o.dragmoved=false;if(o.isOn){n.move(n.x-20,n.y-20);o.isOn.hotPuted=null;m.sound1.stop()}var p=m.getObjVars(m.organ_mc).userKeyList;if(p){p.splice(0)}o.isOn=null;n.startDrag(null,null,o,l);m.curk=n;n.addETL("pressup",m.onDCStageUp,m);m.organ_mc.s_mc.gotoAndStop(m.getOrganPower()?1:0)};c.prototype.onDCStageUp=function(l){var m=this;l.currentTarget.removeETL(l.type,arguments.callee,m);var n=l.currentTarget;n.stopDrag();var o=m.getObjVars(n);if(!o.dragmoved){var p=n.globalToLocal(l.stageX,l.stageY);var q=m.getObjConst(n);var r=q.rect;if(!o.isOn&&n.x==q.x2){m.getObjVars(m.organ_mc).rotatedDC=true;var s=n.rotation==0?180:0;TweenMotion.to(n,0.3,{rotation:s});return}}var t=n.getBounds(m.organ_mc);var u=[m.organ_mc.d0_mc,m.organ_mc.d1_mc];var v=true;var w=false;for(var x=0;x<u.length;x++){var y=u[x];var q=m.getObjConst(y);var z=q.rect;if(!q.hotPuted&&t.intersects({x:q.x+z.x+z.width/4,y:q.y+z.y+z.height/4,width:z.width/2,height:z.height/2})){m.getObjVars(m.organ_mc).clickedKey=true;if(n.rotation==q.rotation){q.hotPuted=true;v=false;n.move(q.x,q.y);o.isOn=q;if(m.getOrganPower()){if(true||!m.getObjVars(m.organ_mc).welldone){m.getObjVars(m.organ_mc).welldone=true;m.playSound("organid5.mp3",d.GOOD)}m.playSound1("organid6.mp3")}else{m.playSound("organid4.mp3",d.GOOD)}}else{m.playSound("organid3.mp3",d.BAD);o.errtime?o.errtime++:o.errtime=1}break}}if(v){var q=m.getObjConst(n);var A=TweenMotion.to(n,0.3,{x:q.x2,y:q.y2,apply:m});if(o.errtime>=3){A.call(m.checkTips)}}m.organ_mc.s_mc.gotoAndStop(m.getOrganPower()?1:0)};c.prototype.playSound=function(l,m){var n=this;n.role_mc.showWithSound(l,m)};c.prototype.playSound1=function(l){var m=this;m.sound1.play(kisgame.RManager.getBlobUrl(l))};c.prototype.freePlaySound=function(l,m,n){var p=this;var o=p.reuse_sd_arr;var q=o.length;var r=null;var s=0;for(var t=0;t<q;t++){var u=o[t];if(!u.playing){r=u;break}s++}if(s>m&&m>1){if(n){r=o[0]}else{return}}if(!r){r=Sound.create();o.push(r)}r.play(kisgame.RManager.getBlobUrl(l))};c.prototype.onKDown=function(l){var n=this;var m=n.curk=l.currentTarget;m.bg_mc.gotoAndStop(1);m.scaleY=0.92;var o=n.getObjVars(n.organ_mc);o.clickedKey=true;if(n.getOrganPower()){n.clearLaterFrame(n.checkTips);m.light.playOnce(0);n.freePlaySound("organids"+(m.currentFrame+1)+".mp3");var p=getTimer();var q=o.time||p;var r=o.userKeyList;if(!r)r=o.userKeyList=[];var s=(p-q)/1000;if((s>0.2&&s<2)||r.length==0){r.push(m.currentFrame+1)}else{r.push(-1)}o.time=p}else{if(!n.role_mc.sound.playing){n.playSound("organid2.mp3")}}m.addETL("pressup",n.onKStageUp,n);n.closeFingerTips();n.clearLaterFrame(n.checkUserScore)};c.prototype.onKStageUp=function(l){var m=this;l.currentTarget.removeETL(l.type,arguments.callee,m);m.callLaterFrame2(m.rebackKeyMC,5,m,l.currentTarget);m.callLaterFrame(m.checkUserScore,4*30,m)};c.prototype.checkUserScore=function(){var m=this;var l=m.getObjVars(m.organ_mc);var n=l.userKeyList;if(n){var o=n.length;var l=m.getObjVars(m.organ_mc);var p=l.curQPData;var q=p.length;var r=0;var s=0;var t=true;for(var u=0;u<o&&t;u++){for(var v=u;v<o&&t;v++){var w=n[v];for(var x=0;x<q&&t;x++){var y=p[x];r=0;if(w==y){r++;for(var z=x+1,A=v+1;z<q&&A<o;z++,A++){var B=n[A],C=p[z];if(B==C){r++}else{break}}}if(s<r)s=r;if(s>=o||s>=q){t=false;break}}if(r>10){t=false;break}}}if(s<5){m.playSound("organid9.mp3",d.BAD)}else{m.playSound("organid10.mp3",d.GOOD);l.tanNext=true;m.checkTips()}n.splice(0)}};c.prototype.rebackKeyMC=function(l){l.bg_mc.gotoAndStop(0);l.scaleY=1};c.prototype.getOrganPower=function(){var m=this;var l=m.getObjVars(m.organ_mc.d0_mc);var n=m.getObjVars(m.organ_mc.d1_mc);return l.isOn&&n.isOn};c.prototype.initQuPu=function(){var m=this;var l=m.organ_mc.crown_mc;l.addChild(m.tp0_mc);l.addChild(m.tp1_mc);l.addChild(m.tp2_mc);m.tp0_mc.x=m.tp1_mc.x=m.tp2_mc.x=214;m.tp0_mc.y=m.tp1_mc.y=m.tp2_mc.y=65;m.tp1_mc.visible=m.tp2_mc.visible=false;m.tp0_mc.hitAreaRectangle=m.tp1_mc.hitAreaRectangle=m.tp2_mc.hitAreaRectangle=new kisgame.Rectangle(0,0,m.tp0_mc.width,m.tp0_mc.height);m.tp0_mc.on("click",m.onQuPuClick,m);m.tp1_mc.on("click",m.onQuPuClick,m);m.tp2_mc.on("click",m.onQuPuClick,m);l.l1_mc.visible=l.l2_mc.visible=false;m.tp0_mc.data=[1,1,1,2,3,3,3,3,4,5,6,6,5,4,3,5,5,2,3,1];m.tp1_mc.data=[1,2,3,1,1,2,3,1,3,4,5,3,4,5,5,6,5,4,3,1,5,6,5,4,3,1,1,5,1,1,5,1];m.tp2_mc.data=[3,3,3,1,6,6,6,4,1,3,5,5,4,3,2,2,3,4,4,3,2,3,1,1,3,2,5,7,2,1];var n=m.getObjVars(m.organ_mc);n.curQPData=m.tp0_mc.data;var o=l.qp_mc;o.addChild(m.qp0_mc);o.addChild(m.qp1_mc);o.addChild(m.qp2_mc);var p=new kisgame.TouchScrollHelper();m.qp0_mc.move(0,0);m.qp1_mc.move(451,0);m.qp2_mc.move(451*2,0);var q=3;var r=new kisgame.Rectangle(0,0,451,198);var s=r.width;var t=0;var u=l.bg_mc;o.on("changepage",m.onQuPuChange,m);o.scroller=p;p.setParamPage(o,q*(s+t)-t,kisgame.DirectionType.HORIZONTAL,r,u,s+t,q-1,1,0)};c.prototype.onQuPuClick=function(l){var n=this;var m=n.organ_mc.crown_mc.qp_mc.scroller;var o=m.pageIndex;if(o<2){o++}else{o=0}m.setPageIndex(o)};c.prototype.onQuPuChange=function(l){var o=this;var m=l.data||0;var n=o.organ_mc.crown_mc;var p=null;if(m==0){p=o.tp0_mc;o.tp1_mc.visible=o.tp2_mc.visible=false;n.l0_mc.visible=true;n.l1_mc.visible=n.l2_mc.visible=false}else if(m==1){p=o.tp1_mc;o.tp0_mc.visible=o.tp2_mc.visible=false;n.l1_mc.visible=true;n.l0_mc.visible=n.l2_mc.visible=false}else if(m==2){p=o.tp2_mc;o.tp1_mc.visible=o.tp0_mc.visible=false;n.l2_mc.visible=true;n.l1_mc.visible=n.l0_mc.visible=false}var q=o.getObjVars(o.organ_mc);q.curQPData=p.data;p.visible=true};c.prototype.easeBounceOut=function(l,h,m,n){if((l/=n)<(1/2.75)){return m*(7.5625*l*l)+h}else if(l<(2/2.75)){return m*(7.5625*(l-=(1.5/2.75))*l+.75)+h}else if(l<(2.5/2.75)){return m*(7.5625*(l-=(2.25/2.75))*l+.9375)+h}else{return m*(7.5625*(l-=(2.625/2.75))*l+.984375)+h}};c.prototype.easeExpoIn=function(l,h,m,n){return (l==0)?h:m*Math.pow(2,10*(l/n-1))+h-m*0.001};c.prototype.getObjVars=function(l){var m=this;if(!m.vars_obj)m.vars_obj=new Hashtable();var n=m.vars_obj.getValue(l);if(n){return n}else{var o=new Object();m.vars_obj.addValue(l,o);return o}};c.prototype.getObjConst=function(l){var m=this;if(!m.const_obj)m.const_obj=new Hashtable();var n=m.const_obj.getValue(l);if(n){return n}else{var o=new Object();m.const_obj.addValue(l,o);return o}};c.prototype.createShadowBmp=function(l){var n=this;var m=new g();n.addChildAt(m,1);m.setTarget(l);l.shadow_mc=m;return m};c.prototype.resetDCShadowY=function(){var m=this;var l=m.organ_mc.d0_mc;var n=m.getObjConst(l);var o=m.organ_mc.local2Target(m,{x:n.x2,y:n.y2});var p=l.shadow_mc;p.setBaseY(o.y);var q=m.organ_mc.d1_mc;var n=m.getObjConst(q);var o=m.organ_mc.local2Target(m,{x:n.x2,y:n.y2});var p=q.shadow_mc;p.setBaseY(o.y);trace(o.y)};c.prototype.setSize=function(l,m){var n=this;n._super(c.super_p.setSize,l,m);n.bg_mc.setSize(l,m);n.alignDirection(n.organ_mc,kisgame.DirectionType.CENTER);var o=n.getObjConst(n.organ_mc);n.organ_mc.y=n.height-n.height*o.bottomRate-n.organ_mc.height;var p=n.organ_mc.y+n.organ_mc.height;n.organ_mc.shadow_mc.setBaseY(p);n.role_mc.bird_mc.shadow_mc.setBaseY(p);o.x=n.organ_mc.x;o.y=n.organ_mc.y;var o=n.getObjConst(n.role_mc);n.alignDirection(n.role_mc,kisgame.DirectionType.BOTTOM|kisgame.DirectionType.RIGHT,false,o);n.role_mc.x=o.x;n.role_mc.y=o.y;o.cx=o.x+o.rect.width/2;o.cy=o.y+o.rect.height/2;var q=n.getObjVars(n.role_mc);if(!q.flyed){n.role_mc.turn(n.width/2,o.cy)}n.resetDCShadowY();n.closeFingerTips()};;c.prototype.k_ctor=function(l){var m=this;m._super(c.super_p.k_ctor,l)};var e=["width",1280,"height",720,"renderMode",undefined,"scaleMode","EXACT_FIT_PHONE","alignMode","TOP_LEFT","borderformat","background",1,"backgroundColor","#044375","backgroundImage","","sizeChildren","url","app/kisgamefactory/j6nhnquo/认识电池/images/bg.jpg","proName","bg_mc","x",0,"y","regRateX",0.5,"regRateY","rotation","alpha","scaleX","scaleY","skewX","skewY","autoSize","false","visible",60,"organ_mc",136,12,451,198,"app/kisgamefactory/j6nhnquo/认识电池/images/qp1.png","qp1_mc",49,35,"app/kisgamefactory/j6nhnquo/认识电池/images/qp0.png","qp0_mc",9,26,"app/kisgamefactory/j6nhnquo/认识电池/images/qp2.png","qp2_mc",80,225,36,"app/kisgamefactory/j6nhnquo/认识电池/images/t0.png","tp0_mc",880,164,"app/kisgamefactory/j6nhnquo/认识电池/images/t1.png","tp1_mc",889,124,"app/kisgamefactory/j6nhnquo/认识电池/images/t2.png","tp2_mc",812,634,165,"app/kisgamefactory/j6nhnquo/认识电池/images/shadow.png",217,583,0.63,"role_mc",1061,502,0.7,"fingerTips","spend",55,110,"app/kisgamefactory/j6nhnquo/认识电池/images/cl.png",-54,"finger_mc",38.346835443038,36.71111111111111,79,180,"index","app/kisgamefactory/j6nhnquo/认识电池/images/finger.png","images",[23,89],152,2,3,166,4,5,6,[23,92,12,23,93,92,94,95,96,23,97,23,98,23],[23,23,12,23,93,92,94,95,96,23,97,23,98,23],168,149,70,130,[23,101,12,95,93,101,94,102,96,23,97,103,98,104],[23,23,12,95,93,101,94,102,96,23,97,103,98,104],"frames",[23,99,12,100,93,105,94,106],"spriteSheetData",[88,23,90,91,107,108]];function f(l,m,n){l.parseFromPool&&l.parseFromPool(m,n,e)}c.prototype.cuin=function(){var l=this;f(l,[0,1,2,3,4,5,6,7,8,9,10,5,11,12,13,14,15,16,17,5]);var m=l;var n;n=new a();f(n,[0,1,2,3,18,19,20,21,22,23,24,23,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,35,36,12]);m.bg_mc=n;m.addChild(n);n.draw();n=new organlib.organ();f(n,[0,37,2,37,20,38,22,39,24,40,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,36,12]);m.organ_mc=n;m.addChild(n);n.draw();n=new a();f(n,[0,41,2,42,18,43,20,44,22,45,24,46,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,35,36,12]);m.qp1_mc=n;m.addChild(n);n.draw();n=new a();f(n,[0,41,2,42,18,47,20,48,22,49,24,50,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,35,36,12]);m.qp0_mc=n;m.addChild(n);n.draw();n=new a();f(n,[0,41,2,42,18,51,20,52,22,23,24,53,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,35,36,12]);m.qp2_mc=n;m.addChild(n);n.draw();n=new a();f(n,[0,54,2,55,18,56,20,57,22,58,24,59,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,12,36,12]);m.tp0_mc=n;m.addChild(n);n.draw();n=new a();f(n,[0,54,2,55,18,60,20,61,22,62,24,63,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,12,36,12]);m.tp1_mc=n;m.addChild(n);n.draw();n=new a();f(n,[0,54,2,55,18,64,20,65,22,66,24,53,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,12,36,12]);m.tp2_mc=n;m.addChild(n);n.draw();n=m.role_mc=new i();m.addChild(n);n.draw();n=m.fingerTips=new k();m.addChild(n);n.draw();l._width=l.width;l._height=l.height;l.organ_mc.initRRect();l.role_mc.initRRect(null,null,1);l.createShadowBmp(l.organ_mc);l.createShadowBmp(l.role_mc.bird_mc);l.sound1=Sound.create();l.reuse_sd_arr=[];var o=l.organ_mc.d0_mc;var p=l.organ_mc.d1_mc;var q=l.getObjConst(o);q.x=o.x;q.y=o.y;q.rect=o.getBounds();var r=l.getObjConst(p);r.x=p.x;r.y=p.y;r.rect=p.getBounds();o.move(15,538);p.move(15,o.y+o.getBounds().height+20);q.x2=o.x;q.y2=o.y;r.x2=p.x;r.y2=p.y;q.rotation=o.rotation;r.rotation=p.rotation;p.rotation=0;l.createShadowBmp(o);l.createShadowBmp(p);l.resetDCShadowY();var s=l.getObjConst(l.organ_mc);s.x=l.organ_mc.x;s.y=l.organ_mc.y;s.bottomRate=l.organ_mc.bottom/l.height;var s=l.getObjConst(l.role_mc);s.x=l.role_mc.x;s.y=l.role_mc.y;var t=l.role_mc.getBounds(l);s.rect=t;s.cx=t.x+t.width/2;s.cy=t.y+t.height/2;s.bottomRate=l.role_mc.bottom/l.height;l.initQuPu();o.visible=false;p.visible=false;o.addETL(KISU.md,l.onDCDown,l);p.addETL(KISU.md,l.onDCDown,l);o.setHitTestRect();p.setHitTestRect();l.organ_mc.s_mc.gotoAndStop(0);for(var u=0;u<8;u++){l.organ_mc["l"+u+"_mc"].gotoAndStop(0);var v=l.organ_mc["k"+u+"_mc"];var w=l.organ_mc["l"+u+"_mc"];v.light=w;v.setHitTestRect();v.gotoAndStop(u);v.bg_mc.gotoAndStop(0);v.addETL(KISU.md,l.onKDown,l)}l.startProject()};function g(){var m=this;var l=m;l.k_ctor();f(l,[0,67,2,68,18,69,20,16,22,70,24,71,25,26,27,26,28,23,29,72,30,12,31,12,32,23,33,23,34,16,36,12]);l.cuin();delete l.cuin}KISU.extend(g,a);var h=g.prototype;h.setTarget=function(l,m){var n=this;n.target=l;n.targetBounds=l.getBounds().clone();var o=l.local2TargetRect(n.parent,n.targetBounds);var p=o.width;var q=p/n.whRate;n.setSize(o.width,Math.min(q,n.maxHeight));if(!m){n.start()}else{n.stop()}n.updateUI()};h.start=function(){var l=this;l.addETL("tick",l.onTick,l)};h.stop=function(){var l=this;l.removeETL("tick",l,onTick,l)};h.onTick=function(l){var m=this;if(!m.stage||!m.image)return;var n=m.target.local2TargetRect(m.parent,m.targetBounds);m.x=n.x+n.width/2-m.width/2;var o=n.y+n.height;m.y=Math.max(m.baseLineY,o)-m.height/2};h.setBaseY=function(l){var m=this;m.baseLineY=l};;g.prototype.k_ctor=function(l){var m=this;m.callSuperMethod(g.super_p.k_ctor,l)};g.prototype.cuin=function(){var l=this;l.whRate=l.width/l.height;l.maxHeight=l.height;l.baseLineY=l.y};;function i(){var m=this;var l=m;l.k_ctor();f(l,[0,37,2,37,20,73,22,74,24,75,25,26,27,26,28,23,29,12,30,76,31,76,32,23,33,23,36,12]);l.cuin();delete l.cuin}KISU.extend(i,FatBirdlib.FatBird);var h=i.prototype;h.turn=function(l,m,n){var o=this;o.bird_mc.gotoAndStop(0);var p=o.parent.local2Target(o,null,[{x:0,y:0},{x:o.parent.width,y:o.parent.height},{x:l,y:m}]);var q=o.bird_mc.getBounds(o);var r=o.bird_mc.x-q.x-q.width/2;var s=o.bird_mc.y-q.y-q.height/2;var t=p[2].x+r;var u=p[2].y+s;if(n){if(l<0&&(p[0].x-p[2].x)<q.width/2){t-=q.width/2-(p[0].x-p[2].x)}if(l>o.parent.width&&(p[2].x-p[1].x)<q.width/2){t+=q.width/2-(p[2].x-p[1].x)}if(m<0&&(p[0].y-p[2].y)<q.height/2){u-=q.height/2-(p[0].y-p[2].y)}if(m>o.parent.height&&(p[2].y-p[1].y)<q.height/2){u+=q.height/2-(p[2].y-p[1].y)}}o.bird_mc.move(t,u);o.bird_mc.gotoAndPlay("turn")};h.stand=function(l,m,n){var o=this;o.bird_mc.gotoAndPlay("stand");var p=o.parent.local2Target(o,null,[{x:0,y:0},{x:o.parent.width,y:o.parent.height},{x:l,y:m}]);var q=o.bird_mc.getBounds(o);var r=o.bird_mc.x-q.x-q.width/2;var s=o.bird_mc.y-q.y-q.height/2;var t=p[2].x+r;var u=p[2].y+s;if(n){if(l<0&&(p[0].x-p[2].x)<q.width/2){t-=q.width/2-(p[0].x-p[2].x)}if(l>o.parent.width&&(p[2].x-p[1].x)<q.width/2){t+=q.width/2-(p[2].x-p[1].x)}if(m<0&&(p[0].y-p[2].y)<q.height/2){u-=q.height/2-(p[0].y-p[2].y)}if(m>o.parent.height&&(p[2].y-p[1].y)<q.height/2){u+=q.height/2-(p[2].y-p[1].y)}}o.bird_mc.move(t,u)};h.flyTo=function(l,m,n,o,p,q,r){var s=this;TweenMotion.killTweensOf(s.bird_mc);if(n>l){s.bird_mc.scaleX=-1}else{s.bird_mc.scaleX=1}var t;if(n==l){t="fly"}else{t="fly2"}s.bird_mc.gotoAndStop(t);var u=s.parent.local2Target(s,null,[{x:0,y:0},{x:s.parent.width,y:s.parent.height},{x:l,y:m},{x:n,y:o}]);var v=s.bird_mc.getBounds(s);var w=s.bird_mc.x-v.x-v.width/2;var x=s.bird_mc.y-v.y-v.height/2;var y=u[2].x+w;var z=u[2].y+x;var A=u[3].x+w;var B=u[3].y+x;if(r){if(l<0&&(u[0].x-u[2].x)<v.width/2){y-=v.width/2-(u[0].x-u[2].x)}if(l>s.parent.width&&(u[2].x-u[1].x)<v.width/2){y+=v.width/2-(u[2].x-u[1].x)}if(n<0&&(u[0].x-u[3].x)<v.width/2){A-=v.width/2-(u[0].x-u[3].x)}if(n>s.parent.width&&(u[3].x-u[1].x)<v.width/2){A+=v.width/2-(u[3].x-u[1].x)}if(m<0&&(u[0].y-u[2].y)<v.height/2){z-=v.height/2-(u[0].y-u[2].y)}if(m>s.parent.height&&(u[2].y-u[1].y)<v.height/2){z+=v.height/2-(u[2].y-u[1].y)}if(o<0&&(u[0].y-u[3].y)<v.height/2){B-=v.height/2-(u[0].y-u[3].y)}if(o>s.parent.height&&(u[3].y-u[1].y)<v.height/2){B+=v.height/2-(u[3].y-u[1].y)}}s.bird_mc.move(y,z);var C={x:A,y:B};if(q){for(var D in q){C[D]=q[D]}}s.bird_mc.gotoAndPlay(t);return TweenMotion.to(s.bird_mc,p,C)};h.flyTo2=function(l,m,n,o,p,q,r){var t=this;var s=t.bird_mc.getBounds(t.parent);var u=s.x+s.width/2;var v=s.y+s.height/2;return t.flyTo(u+l,v+m,n,o,p,q,r)};h.showWithSound=function(l,m){var n=this;TweenMotion.killTweensOf(n.bird_mc);var o="speak";if(m==d.GOOD){o="good"}else if(m==d.BAD){o="down"}else if(m==d.SPEAK){o="speak"}var p=n.ori_info;if(n.bird_mc.visible){n.bird_mc.move(p.x,p.y);n.bird_mc.gotoAndPlay(o);n.sound.play(kisgame.RManager.getBlobUrl(l))}else{var q=n.parent.local2Target(n,{x:n.parent.width,y:n.parent.height});var r=n.bird_mc.getBounds(n);n.bird_mc.visible=true;n.bird_mc.gotoAndPlay("fly");n.bird_mc.move(p.x,n.bird_mc.y+q.y-r.y);TweenMotion.to(n.bird_mc,1,{y:p.y,ease:n.easeBounceOut,apply:n}).call(function(){var n=this;n.bird_mc.gotoAndPlay(o);n.sound.play(kisgame.RManager.getBlobUrl(l))})}};h.onRoleSoundEvent=function(l){var m=this;m.bird_mc.gotoAndPlay("stand");var n=l.type;if(n=="complete"||n=="failed"){var o=m.parent.local2Target(m,{x:m.parent.width,y:m.parent.height});var p=m.bird_mc.getBounds(m);var q=m.ori_info;TweenMotion.to(m.bird_mc,2,{overwrite:1,forceAdd:true,apply:m}).call(function(){var m=this;m.bird_mc.gotoAndPlay("turntojump")}).to(1,{delay:0.2,x:m.bird_mc.x+o.x-p.x,ease:TweenMotion.noneease}).call(m.onRoleHide)}else if(n=="pause"){}};h.onRoleHide=function(){var l=this;l.bird_mc.visible=false;l.bird_mc.stop()};h.easeBounceOut=function(l,h,m,n){if((l/=n)<(1/2.75)){return m*(7.5625*l*l)+h}else if(l<(2/2.75)){return m*(7.5625*(l-=(1.5/2.75))*l+.75)+h}else if(l<(2.5/2.75)){return m*(7.5625*(l-=(2.25/2.75))*l+.9375)+h}else{return m*(7.5625*(l-=(2.625/2.75))*l+.984375)+h}};;i.prototype.k_ctor=function(l){var m=this;m.callSuperMethod(i.super_p.k_ctor,l)};i.prototype.cuin=function(){var l=this;l.sound=Sound.create();l.sound.on("complete",l.onRoleSoundEvent,l);l.sound.on("failed",l.onRoleSoundEvent,l);l.ori_info={x:l.bird_mc.x,y:l.bird_mc.y}};;function j(){var m=this;var l=m;l.k_ctor();f(l,[0,23,2,23,20,16,22,79,24,79,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,36,12,78,5]);l.cuin();delete l.cuin}KISU.extend(j,_);var h=j.prototype;h.play=function(){var l=this;l.addETL("tick",l.onEnterFrame,l)};h.stop=function(){var l=this;l.removeETL("tick",l.onEnterFrame,l)};h.onEnterFrame=function(l){var m=this;m.rotation+=3;if(m.scaleX>1){m.signScale=-1}else if(m.scaleX<0.6){m.signScale=1}m.scaleX+=m.signScale*0.03;m.scaleY+=m.signScale*0.03};;j.prototype.k_ctor=function(l){var m=this;m.callSuperMethod(j.super_p.k_ctor,l)};j.prototype.cuin=function(){var m=this;var l=m;var n;n=new a();f(n,[0,80,2,80,18,81,22,82,24,82,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,34,12,36,12]);;l.addChild(n);n.draw();m.signScale=-1};;function k(){var m=this;var l=m;l.k_ctor();f(l,[0,23,2,23,20,77,22,23,24,23,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,36,12,78,5]);l.cuin();delete l.cuin}KISU.extend(k,_);var h=k.prototype;h.setData=function(l){var m=this;m.alpha=1;m.stepData=l;m.stepIndex=-1;m.loopTime=0;var n=m.cListData;n.splice(0);var o=l.steps;var p=o.length;for(var q=0;q<p;q++){var r=o[q];n.push([r[1],r[2]]);if(r[0]=="drag"){n.push([r[3],r[4]])}}m.updateCircles();m.nextStep()};h.nextStep=function(){var m=this;var l=m.stepIndex;var n=m.stepData.steps;if(l<n.length-1){l++;var o=n[l];m.stepIndex=l;var p=o[0];if(p=="drag"){m.finger_mc.gotoAndStop(0);m.addChild(m.finger_mc);m.finger_mc.move(o[1]+30,o[2]-40);TweenMotion.to(m.finger_mc,0.5,{x:o[1],y:o[2],apply:m}).call(function(){var m=this;m.finger_mc.gotoAndStop(1)}).to(1,{delay:0.5,x:o[3],y:o[4]}).call(m.nextStep)}else if(p=="click"){m.finger_mc.gotoAndStop(2);m.addChild(m.finger_mc);m.finger_mc.move(o[1],o[2]-5);TweenMotion.to(m.finger_mc,0.3,{x:o[1],y:o[2],apply:m}).call(function(){var m=this;m.finger_mc.gotoAndStop(3)}).wait(0.3).call(function(){var m=this;m.finger_mc.gotoAndStop(2)}).to(0.3,{x:o[1],y:o[2]-5}).call(m.nextStep)}else if(p=="dbclick"){m.finger_mc.gotoAndStop(2);m.addChild(m.finger_mc);m.finger_mc.move(o[1],o[2]-5);TweenMotion.to(m.finger_mc,0.2,{x:o[1],y:o[2],apply:m}).call(function(){var m=this;m.finger_mc.gotoAndStop(3)}).wait(0.2).call(function(){var m=this;m.finger_mc.gotoAndStop(2)}).wait(0.1).call(function(){var m=this;m.finger_mc.gotoAndStop(3)}).wait(0.2).call(function(){var m=this;m.finger_mc.gotoAndStop(2)}).to(0.3,{y:o[2]-5}).call(m.nextStep,null,false,m)}}else{if(m.stepData.loop){m.loopTime++;if(m.stepData.loop===true||m.stepData.loop>m.loopTime){m.stepIndex=-1;m.callLaterFrame(m.nextStep,0.5*30,m);return}}m.stopStep()}};h.stopStep=function(){var l=this;l.clearLaterFrame(l.nextStep,l);TweenMotion.killTweensOf(l.finger_mc);TweenMotion.to(l,0.4,{alpha:0}).call(l.removeSelf,null,false,l)};h.createCircleItem=function(l){var m=new j();m.play();return m};h.destoryCircleItem=function(l){l.stop();l.destory(true);return l};h.setCircleItemData=function(l,m,n,o){l.move(m[0],m[1])};h.updateCircles=function(){var m=this;var l=m.cListData;var n=l?l.length:0;var o=m.circleList;var p=Math.max(o.length,n);var q=m;var r;for(var s=0;s<p;s++){if(s>=n){r=o[n];q.removeChild(r);m.destoryCircleItem(r);o.splice(n,1)}else{if(s>=o.length){r=m.createCircleItem(l[s]);o.push(r);q.addChild(r)}else{r=o[s]}m.setCircleItemData(r,l[s],s,s)}}};;k.prototype.k_ctor=function(l){var m=this;m.callSuperMethod(k.super_p.k_ctor,l)};k.prototype.cuin=function(){var m=this;var l=m;var n;n=new $();f(n,[20,83,22,84,24,85,0,86,2,87,109,110,25,26,27,26,28,23,29,12,30,12,31,12,32,23,33,23,36,12]);l.finger_mc=n;l.addChild(n);n.draw();m.cListData=[];m.circleList=[];m.stepData=null;m.stepIndex=-1;m.loopTime=0;m.removeChild(m.finger_mc);m.mouseEnabled=m.mouseChildren=false};;;return new c()};function configkislib(){

kisgame.RManager.loadExternalLibs([{ lib: organlib, images: organimages, imgid: "organid",basePath:"app/kisgamefactory/j6nhnquo/认识电池/organ/" },{ lib: FatBirdlib, images: FatBirdimages, imgid: "FatBirdid",basePath:"app/kisgamefactory/j6nhnquo/认识电池/FatBird/" }]);
}