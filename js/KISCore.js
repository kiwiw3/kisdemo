var b=navigator.userAgent.toLowerCase();var d=document.documentMode;var isIE=navigator.appName.indexOf("Microsoft Internet Explorer")!=-1;var isIE6=isIE&&!window.XMLHttpRequest,isIE10=d==10,isIE9=d==9,isIE7=isIE&&/msie7/.test(b)||d==7,isIE8=isIE&&/msie8/.test(b)||d==8,isSF=b.match(/safari/),isFF=!!document.getBoxObjectFor||'mozInnerScreenX' in window,isWK=!!window.devicePixelRatio,isCR=/s/.test(/a/.toString),isTouch=b.match(/(iphone|ipod|android|ios|ipad)/);if(!isTouch)isTouch=document.hasOwnProperty&&document.hasOwnProperty("ontouchstart")?true:false;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(_){var a=this;var $=a.length;for(var c=0;c<$;c++){if(a[c]===_){return c}}return -1};Array.CASEINSENSITIVE=1;Array.DESCENDING=2;Array.NUMERIC=16;(function(){var _=function($,a){var c=this;if(!$&&!a)return c.sort();if(!a){a=[0]}else if(!(a instanceof Array)){a=[a]}if(!($ instanceof Array)){$=[$]}if(a.length!=$.length){a=[];a.length=$.length}return c.sort(function(e,_){var f=0;for(var g=0;g<$.length;g++){var h=$[g];var j=parseInt(a[g])||0;var k=e[h];var l=_[h];if((j&Array.CASEINSENSITIVE)>0){k=(k+"").toLowerCase();l=(l+"").toLowerCase()}if((j&Array.NUMERIC)>0){k=Number(k)||0;l=Number(l)||0}f=(k==l?0:k>l?1:-1);if((j&Array.DESCENDING)>0){f=~f+1}if(k!=l){break}}return f})};if(Object.defineProperty&&!isIE8){Object.defineProperty(Array.prototype,"sortOn",{enumerable:false,value:_})}else{Array.prototype.sortOn=_}})();var KIS_Now=window.performance&&(window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow);if(KIS_Now){window.performance.kisNow=KIS_Now;window.getTimer=function(){return window.performance.kisNow()}}else{window.getTimer=function(){return new Date().getTime()}}var b;function KISU(){}b=KISU;b.a=function(_,$){_.addChild($).draw()};b.pAd=function(_,$,a){$.push(a);_.addChild(a)};b.dump=function(_,$,a,c){if(c>=a)return "null";if(a!=undefined&&c==undefined)c=0;if($===true)$="\"";var e="";var f="";if(_ instanceof Array){;++c;e="[";var g=_.length;for(var h=0;h<g;h++){e+=f;e+=arguments.callee(_[h],$,a,c);f=","}e+="]"}else if(typeof (_)=="object"&&_!=null){;++c;e="{";for(var j in _){if($)e+=f+$+j+$+":";else e+=f+j+":";e+=arguments.callee(_[j],$,a,c);f=","}e+="}"}else{switch(typeof _){case "string":e+='"'+_.replace(/\"/g,'\\"')+'"';break;default:e+=_}return e}return e};if(!window.dump)window.dump=b.dump;b.clone=function(_){var $;if(_ instanceof Array){$=[];var a=_.length;while(a--){$[a]=arguments.callee(_[a])}return $}else if(typeof (_)=="object"){$={};for(var c in _){$[c]=arguments.callee(_[c])}return $}else{return _}};if(!window.clone)window.clone=b.clone;b.nPA=function(_,$){var a=$.length;for(var c=0;c<a;c++){var e=$[c][0];var f=$[c][1];var g=e.length;for(var h=0;h<g;h++){var j=f.length;for(var k=0;k<j;k++){_[e[h]][f[k][0]]=f[k][1]}}e.length=0}var a=_.length;for(var c=0;c<a;c++){var l=_[c];l.draw();if(l.lgcn){l.lgcn.apply(l);delete l.lgcn}}_.length=0;$.length=0};b.pPA=function(_,$,a){var c=$.length;for(var e=0;e<c;e++){var f=$[e][0];var g=$[e][1];var h=f.length;for(var j=0;j<h;j++){var k=g.length;for(var l=0;l<k;l++){_[f[j]][g[l][0]]=g[l][1]}}}var c=_.length;for(var e=0;e<c;e++){a.addChild(_[e]).draw()}};b.trim=function(_){return _.replace(/(^\s*)|(\s*$)/g,"")};b.ltrim=function(_){return _.replace(/(^\s*)/g,"")};b.rtrim=function(_){return _.replace(/(\s*$)/g,"")};b.iJSCSS=function(_,$,a,c){var e,i;if(!$)$=_.substr(_.lastIndexOf(".")+1);if($=="js"){var f=document.getElementsByTagName("script");for(i=0;i<f.length;i++){if(f[i].src&&f[i].src.indexOf(_)!=-1||f[i].title==a)return f[i]}e=document.createElement("script");e.type="text/javascript";e.src=_;if(a)e.title=a}else if($=="css"){var g=document.getElementsByTagName("link");for(i=0;i<g.length;i++){if(g[i].href&&g[i].href.indexOf(_)!=-1||g[i].title==a)return g[i]}e=document.createElement("link");e.rel="stylesheet";e.type="text/css";e.href=_;if(a)e.title=a;e.disabled=false}else return;var h=document.getElementsByTagName("head")[0];if(c){for(var j in c){e[j]=c[j]}}h.appendChild(e);return e};b.fsbt=function(_,$,a,c){var e="";switch(typeof _){case "string":e+='"'+_.replace(/\"/g,'\\"')+'"';break;case "number":e+=_;break;case "object":e+=KISU.dump(_,$,a,++c);break;case "boolean":e+=_;break;case "undefined":e+=undefined;break}return e};b.efun=function(_,$){for(var a in $){if(a!="Constructor"&&a!="initialize"&&typeof ($[a])=="function" ){if(!_[a])_[a]=$[a]}}};b.difObj=function(_,$){if(_==$){for(var a in _){if(_[a]!=$[a]){return true}}return false}else{return true}};b.csm=function(_){var e=this;var $=[];var a=arguments.length;for(var c=1;c<a;c++){$.push(arguments[c])}return _.apply(e,$)};b.percent=function(_,$){if(_&&_.toString().indexOf("%")!=-1)return Math.ceil($*parseInt(_.replace("%",""))/100);else return _};b.extend=function(_){var $=arguments.length;var a=null;for(var c=1;c<$;c++){var e=arguments[c];var f=e.prototype;if(c==1){if($==2){_.super_p=f}else{_.super_p=[]}}if($>2){_.super_p[c-1]=f}if(c==1){function g(){}g.prototype=e.prototype;var h=_.prototype;bw=new g();if(!bw.callSuperMethod){bw._super=bw.callSuperMethod=KISU.csm}bw.constructor=_;for(var j in h){bw[j]=h[j]}if(h.constructor.toString().indexOf(".k_ctor()")==-1&&!bw.k_ctor){bw.k_ctor=h.constructor}_.prototype=a=bw}else{for(var j in f){if(typeof (f[j])=="function" ){if(!a[j])a[j]=f[j]}}}}return _.prototype};b.D2R=Math.PI/180;b.R2D=180/Math.PI;if(isTouch){b.md="touchstart",b.mm="touchmove",b.mu="touchend",b.mo="touchenter",b.mt="touchleave",b.ck="click"}else{b.md="mousedown",b.mm="mousemove",b.mu="mouseup",b.mo="mouseover",b.mt="mouseout",b.mw="mousewheel",b.ck="click",b.dk="dblclick";if(isFF){b.mw="DOMMouseScroll"}}window.logContent="";function trace(){var _=arguments;var $=_.length;var a="";for(var c=0;c<$;c++){a+=arguments[c];if(c<$-1){a+=" , "}}window.logContent+=a+"\n";if(window.console){window.console.log(a)}else if(window.stage){var e=new KEvent("trace");e.data=window.logContent;stage.dispatchEvent(e);if(e.resetData)window.logContent=""}}function clearTrace(){if(window.console){if(window.console.clear){window.console.clear()}}else{var _=window.logContent;window.logContent="";var $=new KEvent("trace");$.data="";stage.dispatchEvent($)}return _}this.kiscore=window;(function(){"use strict";function _(a,b,c){var d=this;d.type=a;if(b!=undefined){d.bubbles=b}else{d.bubbles=false}if(c!=undefined){d.cancelable=c}else{d.cancelable=true}d.defaultPrevented=false;d.target=null;d.currentTarget=null}var $=_.prototype;$.stopPropagation=function(){var a=this;if(a.bubbles)a.bubbles=false};$.stopImmediatePropagation=function(){var a=this;if(a.bubbles)a.bubbles=false};$.preventDefault=function(){var a=this;a.defaultPrevented=a.cancelable&&true};$.isDefaultPrevented=function(){var a=this;return a.defaultPrevented};$.remove=function(){var a=this;a.removed=true};$.stop=function(){var a=this;a.stopPropagation();a.preventDefault()};$.clone=function(){var b=this;var a=new _(b.type,b.bubbles,b.cancelable);a.defaultPrevented=false;a.target=b.target;a.currentTarget=b.currentTarget;return a};kiscore.KEvent=_}());(function(){"use strict";function _(){var a=this;a.keys=[];a.values=[]}var $=_.prototype;$.getValues=function(){var a=this;return a.values};$.getKeys=function(){var a=this;return a.keys};$.getIndexBy=function(a,b){var d=this;if(a){var c=d.keys.length;for(var e=0;e<c;e++){if(d.keys[e]==a){return e}}}else if(b){var c=d.values.length;for(var e=0;e<c;e++){if(d.values[e]==b){return e}}}return -1};$.containsKey=function(a){var c=this;var b=c.keys.length;for(var d=0;d<b;d++){if(c.keys[d]==a){return true}}return false};$.containsValue=function(a){var c=this;var b=c.values.length;for(var d=0;d<b;d++){if(c.values[d]==a){return true}}return false};$.getValue=function(a){var d=this;var b=-1;var c=d.keys.length;for(var e=0;e<c;e++){if(d.keys[e]==a){b=e;return d.values[b]}}return null};$.getKey=function(a){var d=this;var b=-1;var c=d.values.length;for(var e=0;e<c;e++){if(d.values[e]==a){b=e;return d.keys[b]}}return null};$.deleteValueAt=function(a){var b=this;b.keys.splice(a,1);b.values.splice(a,1)};$.deleteKey=function(a){var d=this;var b;var c=d.keys.length;for(var e=0;e<c;e++){if(d.keys[e]==a){b=e;d.keys.splice(b,1);return d.values.splice(b,1)[0]}}return null};$.addValue=function(a,b){var d=this;var c=d.keys.length;for(var e=0;e<c;e++){if(d.keys[e]==a){d.values[e]=b;return b}}d.keys.push(a);d.values.push(b);return b};$.shift=function(){var a=this;a.keys.shift();return a.values.shift()};$.size=function(){var a=this;return a.values.length};$.destory=function(){var a=this;if(a.value)a.value.splice(0,a.value.length);if(a.keys)a.keys.splice(0,a.keys.length)};kiscore.Hashtable=_}());(function(){"use strict";var _=kiscore.Hashtable;function $(){var b=this;b.k_ctor()}var a=$.prototype;a.k_ctor=function(){var b=this;b.events=new _()};a.init=function(){var b=this;b.events=new _();KISU.efun(b,$.prototype)};a.clearAllEventListener=function(b){var c=this;return c.events.destory()};a.hasEventListener=function(b){var c=this;return c.events.containsKey(b)};a.removeEventListener=function(b,c,d){var e=this;if(typeof (d)=="boolean"&&arguments.length==4){d=arguments[3]}if(e.events.containsKey(b)){var f=e.events.getValue(b);var g=f.length;for(var h=0;h<g;h++){if(f[h][0]==c&&f[h][1]==d){f.splice(h,1);if(f.length==0){e.events.deleteKey(b)}return}}}};a.dispatchEvent=function(b){var d=this;var c=b.type;if(!b.target)b.target=d;if(d.events.containsKey(c)){b.currentTarget=d;var e=d.events.getValue(c).slice();var f=e.length;if(f>0){for(var g=0;g<f;g++){var h=e[g];var i=h[0];var j=h[1];i.apply(j||i.applyTarget,[b]);if(b.defaultPrevented)return}e.splice(0,e.length)}}if(b.bubbles&&d.parent&&d.parent.dispatchEvent){d.parent.dispatchEvent(b)}};a._dispatchEvent=a.dispatchEvent;a.addEventListener=function(b,c,d){var f=this;if(!c||!b){alert(["type listener:",b,c]);return}var e;if(!f.events.containsKey(b)){e=new Array();f.events.addValue(b,e)}else{e=f.events.getValue(b)}var g=e.length;for(var h=0;h<g;h++){if(e[h][0]==c&&e[h][1]==d){return}}e.push([c,d])};a.on=a.addEventListener;a.off=a.removeEventListener;a.removeEvent=function(b){var c=this;if(c.events.containsKey(b)){var d=c.events.getValue(b);d.splice(0,d.length);c.events.deleteKey(b)}};kiscore.EventDispatcher=$}());(function(){"use strict";var _=new Object();var $=_;$.ht=[];$.intervalID=-1;$.lastTimer=0;$.framerate=30;$.checkAllFrame=function(){var a=_;var b=a.ht.slice(0);var c=b.length;for(var d=0;d<c;d++){var e=b[d];if(e&&e.length==4){var f=e[3];if(f<=0){var g=e[0];var h=e[1];var i=e[2];e[0]=0;e[1]=0;e[2]=0;e[4]=true;g.apply(h,i)}else{f--;e[3]=f}}}b.splice(0,b.length);var b=a.ht;var c=b.length;for(var d=0;d<c;d++){var e=b[d];if(e&&e.length==5){b.splice(d,1);c--;d--}}if(b.length<=0){a.lastTimer=0;a.intervalID=-1}else{var j=0;if(a.lastTimer>0){j=getTimer()-a.lastTimer}a.lastTimer=getTimer();var k=2000/a.framerate-j;if(k<=5){k=5}a.intervalID=setTimeout(a.checkAllFrame,k)}};$.containTarget=function(a,b){var d=this;var c=d.ht;var e=c.length;for(var f=0;f<e;f++){var g=c[f];if(g[0]==a&&g[1]==b){return g}}return false};$.addOnce=function(a,b,c,d){var f=this;var e=f.containTarget(a,c);if(e){e[2]=d;e[3]=b}else{f.add(a,b,c,d)}};$.add=function(a,b,c,d){var e=this;e.ht.push([a,c,d,b]);if(e.intervalID==-1){e.intervalID=setTimeout(e.checkAllFrame,1000/e.framerate)}};$.remove=function(a,b,c){var e=this;var d=e.ht;var f=d.length;for(var g=0;g<f;g++){var h=d[g];if(h[0]==a&&h[1]==b){d.splice(g,1);h.splice(0,h.length);if(!c){return}}}};$.removeOf=function(a){var c=this;var b=c.ht;var d=b.length;for(var e=0;e<d;e++){var f=b[e];if(f[1]==a){b.splice(e,1);f.splice(0,f.length);e--;d--}}};kiscore.LaterFrameTable=_}());(function(){"use strict";function _(a,$,b,c,d,e){var f=this;f.setValues(a,$,b,c,d,e)}var $=_.prototype;_.DEG_TO_RAD=Math.PI/180;$.setValues=function(a,$,b,c,d,e){var f=this;f.a=(a==null)?1:a;f.b=$||0;f.c=b||0;f.d=(c==null)?1:c;f.tx=d||0;f.ty=e||0;return f};$.append=function(a,$,b,c,d,e){var g=this;var f=g.a;var h=g.b;var i=g.c;var j=g.d;if(a!=1||$!=0||b!=0||c!=1){g.a=f*a+i*$;g.b=h*a+j*$;g.c=f*b+i*c;g.d=h*b+j*c}g.tx=f*d+i*e+g.tx;g.ty=h*d+j*e+g.ty;return g};$.prepend=function(a,$,b,c,d,e){var g=this;var f=g.a;var h=g.c;var i=g.tx;g.a=a*f+b*g.b;g.b=$*f+c*g.b;g.c=a*h+b*g.d;g.d=$*h+c*g.d;g.tx=a*i+b*g.ty+d;g.ty=$*i+c*g.ty+e;return g};$.appendMatrix=function(a){var b=this;return b.append(a.a,a.b,a.c,a.d,a.tx,a.ty)};$.prependMatrix=function(a){var b=this;return b.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)};$.appendTransform=function(a,b,c,d,e,f,g,h,i){var m=this;if(e%360){var j=e*_.DEG_TO_RAD;var k=Math.cos(j);var l=Math.sin(j)}else{k=1;l=0}if(f||g){f*=_.DEG_TO_RAD;g*=_.DEG_TO_RAD;m.append(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),a,b);m.append(k*c,l*c,-l*d,k*d,0,0)}else{m.append(k*c,l*c,-l*d,k*d,a,b)}if(h||i){m.tx-=h*m.a+i*m.c;m.ty-=h*m.b+i*m.d}return m};$.prependTransform=function(a,b,c,d,e,f,g,h,i){var m=this;if(e%360){var j=e*_.DEG_TO_RAD;var k=Math.cos(j);var l=Math.sin(j)}else{k=1;l=0}if(h||i){m.tx-=h;m.ty-=i}if(f||g){f*=_.DEG_TO_RAD;g*=_.DEG_TO_RAD;m.prepend(k*c,l*c,-l*d,k*d,0,0);m.prepend(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),a,b)}else{m.prepend(k*c,l*c,-l*d,k*d,a,b)}return m};$.rotate=function(a){var e=this;a=a*_.DEG_TO_RAD;var b=Math.cos(a);var c=Math.sin(a);var d=e.a;var f=e.b;e.a=d*b+e.c*c;e.b=f*b+e.d*c;e.c=-d*c+e.c*b;e.d=-f*c+e.d*b;return e};$.skew=function(a,b){var c=this;a=a*_.DEG_TO_RAD;b=b*_.DEG_TO_RAD;c.append(Math.cos(b),Math.sin(b),-Math.sin(a),Math.cos(a),0,0);return c};$.scale=function(a,b){var c=this;c.a*=a;c.b*=a;c.c*=b;c.d*=b;return c};$.translate=function(a,b){var c=this;c.tx+=c.a*a+c.c*b;c.ty+=c.b*a+c.d*b;return c};$.identity=function(){var a=this;a.a=a.d=1;a.b=a.c=a.tx=a.ty=0;return a};$.invert=function(){var b=this;var a=b.a;var c=b.b;var d=b.c;var e=b.d;var f=b.tx;var g=a*e-c*d;b.a=e/g;b.b=-c/g;b.c=-d/g;b.d=a/g;b.tx=(d*b.ty-e*f)/g;b.ty=-(a*b.ty-c*f)/g;return b};$.isIdentity=function(){var a=this;return a.tx===0&&a.ty===0&&a.a===1&&a.b===0&&a.c===0&&a.d===1};$.equals=function(a){var b=this;return b.tx===a.tx&&b.ty===a.ty&&b.a===a.a&&b.b===a.b&&b.c===a.c&&b.d===a.d};$.transformPoint=function(a,b,c){var d=this;c=c||{};c.x=a*d.a+b*d.c+d.tx;c.y=a*d.b+b*d.d+d.ty;return c};$.decompose=function(a){var b=this;if(a==null){a={}}a.x=b.tx;a.y=b.ty;a.scaleX=Math.sqrt(b.a*b.a+b.b*b.b);a.scaleY=Math.sqrt(b.c*b.c+b.d*b.d);var c=Math.atan2(-b.c,b.d);var d=Math.atan2(b.b,b.a);var e=Math.abs(1-c/d);if(e<0.00001){a.rotation=d/_.DEG_TO_RAD;if(b.a<0&&b.d>=0){a.rotation+=(a.rotation<=0)?180:-180}a.skewX=a.skewY=0}else{a.skewX=c/_.DEG_TO_RAD;a.skewY=d/_.DEG_TO_RAD}return a};$.copy=function(a){var b=this;return b.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)};$.clone=function(){var a=this;return new _(a.a,a.b,a.c,a.d,a.tx,a.ty)};$.toString=function(){var a=this;return "[Matrix (a="+a.a+" b="+a.b+" c="+a.c+" d="+a.d+" tx="+a.tx+" ty="+a.ty+")]"};_.identity=new _();kiscore.Matrix=_}());(function(){"use strict";function _(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x){var y=this;y.resetConstruct(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x)}var $=_.prototype;$.resetConstruct=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x){var y=this;if(!u){y.t=1}else{y.t=0}y.done=false;y.ignore=false;if(!y.eps){y.eps=new Array(4)}else{y.eps.splice(0)}y.eps[0]=y.t;y.eps[1]=o;y.eps[2]=p;y.eps[3]=q;if(n){y.eps=y.eps.concat(n)}if(h!=null){y.onStart=h;y.startParam=k;y.startApply=v}else if(!y.isKeepStart){y.onStart=null;y.startParam=null;y.startApply=null}if(i!=null){y.onUpdate=i;y.updateParam=l;y.updateApply=w}else if(!y.isKeepUpdate){y.onUpdate=null;y.updateParam=null;y.updateApply=null}if(j!=null){y.onComplete=j;y.completeParam=m;y.completeApply=x}else if(!y.isKeepComplete){y.onComplete=null;y.completeParam=null;y.completeApply=null}y.applyTarget=g;y.propertys=b;y.fpropertys=c;y.bases=d;y.base=o;y.delay=f;y.change=p;y.ease=e;y.target=a;;y.duration=q;y.bc=o+p;y.beziers=s;y.secondMode=u;y.baseT=r;var z=new Object();for(var A in b){if(!c.hasOwnProperty(A)){z[A]=b[A]}}if(f==0){for(A in z){a[A]=d[A]}}y.upropertys=z};$.deleteProp=function(a,b){var c=this;delete c.propertys[a];delete c.upropertys[a];if(c.fpropertys)delete c.fpropertys[a];if(c.beziers)delete c.beziers[a];if(b){var d=c.tweenMotionList;if(!d)return;var e=d.length;for(var f=0;f<e;f++){var g=d[f][2];for(var h in g){if(h==a){delete g[h]}}}}};$.changeFactor=function(a){var d=this;var b,p,$,t,segments;var c=d.beziers;var e=d.target;for(p in c){segments=c[p].length;if(a<0){b=0}else if(a>=1){b=segments-1}else{b=parseInt(segments*a)}t=(a-(b*(1/segments)))*segments;$=c[p][b];e[p]=$[0]+t*(2*(1-t)*($[1]-$[0])+t*($[2]-$[0]))}};$.update=function(a){var b=this;if(b.delay<=0){if(b.secondMode){b.t=a-b.baseT}else{b.t++}var c;if(b.t>b.duration||b.change==0){b.finish()}else{b.eps[0]=b.t;c=b.ease.apply(null,b.eps);var d=(c-b.base)/b.change;var e=b.target;if(!b.beziers){for(var f in b.upropertys){e[f]=b.bases[f]+b.upropertys[f]*d}}else{b.changeFactor(d)}if(e.MCTarget){if(b.hOther){}else{if(b.hMove)e.move(e.x,e.y);if(b.hSize)e.setSize(e.width,e.height);if(b.hScale)e.setScaleXY(e.scaleX,e.scaleY);if(b.hRotation)e.setRotation(e.rotation);if(b.hAlpha)e.setAlpha(e.alpha)}}else if(e.updateUI){e.updateUI()}if(b.onStart!=null){var g=b.startApply||b.applyTarget;if(b.startParam!=null){b.onStart.apply(g,b.startParam)}else{b.onStart.apply(g)}b.onStart=null;b.startParam=null;b.startApply=null}if(b.onUpdate!=null){var g=b.updateApply||b.applyTarget;if(b.updateParam!=null){b.onUpdate.apply(g,b.updateParam)}else{b.onUpdate.apply(g)}}}}else{if(b.secondMode){b.delay-=a-b.baseT;b.baseT=a;if(b.delay<0){b.baseT+=b.delay}}else{b.delay--}}};$.finish=function(){var c=this;var a;var b=c.target;var d=c.bases;for(a in c.upropertys){b[a]=d[a]+c.upropertys[a]}for(a in c.fpropertys){b[a]=Boolean(d[a]+c.fpropertys[a])}if(b.MCTarget){if(c.hOther){}else{if(c.hMove)b.move(b.x,b.y);if(c.hSize)b.setSize(b.width,b.height);if(c.hScale)b.setScaleXY(b.scaleX,b.scaleY);if(c.hRotation)b.setRotation(b.rotation);if(c.hAlpha)b.setAlpha(b.alpha);if(c.hVisible)b.setVisible(b.visible)}}if(c.onStart!=null&&!c.isKeepStart){c.onStart=null;c.startParam=null;c.startApply=null}if(c.onComplete!=null){var e=c.completeApply||c.applyTarget;if(c.completeParam!=null){c.onComplete.apply(e,c.completeParam)}else{c.onComplete.apply(e)}if(!c.isKeepComplete){c.onComplete=null;c.completeParam=null;c.completeApply=null}}if(c.onUpdate!=null&&!c.isKeepUpdate){c.onUpdate=null;c.updateParam=null;c.updateApply=null}c.target=null;c.eps=null;c.propertys=null;c.upropertys=null;c.fpropertys=null;c.ease=null;c.bases=null;c.done=true};$.from=function(a,b,c){var e=this;if(c==undefined){c=true}var d=e.tweenMotionList;if(!d){d=[[e.target,a,b,true,c]];e.tweenMotionList=d}else{d.push([e.target,a,b,true,c])}return e};$.to=function(a,b,c){var e=this;if(c==undefined){c=true}var d=e.tweenMotionList;if(!d){d=[[e.target,a,b,false,c]];e.tweenMotionList=d}else{d.push([e.target,a,b,false,c])}return e};$.wait=function(a,b){var d=this;if(b==undefined){b=true}var c=d.tweenMotionList;var e={delay:a,forceAdd:true};if(!c){c=[[d.target,0,e,false,b]];d.tweenMotionList=c}else{c.push([d.target,0,e,false,b])}return d};$.start=function(a,b,c,d){var f=this;var e=f.tweenMotionList;if(e&&e.length){var g=e[e.length-1];var h=g[2];if(h){h.onStart=a;h.onStartParams=b;h.startApply=d}else{g[2]={onStart:a,onStartParams:b,startApply:d,forceAdd:true}}}else{f.onStart=a;f.startParam=b;f.startApply=d}f.isKeepStart=c;return f};$.tick=function(a,b,c,d){var f=this;var e=f.tweenMotionList;if(e&&e.length){var g=e[e.length-1];var h=g[2];if(h){h.onUpdate=a;h.onUpdateParams=b;h.updateApply=d}else{g[2]={onUpdate:a,onUpdateParams:b,updateApply:d,forceAdd:true}}}else{f.onUpdate=a;f.updateParam=b;f.updateApply=d}f.isKeepUpdate=c;return f};$.call=function(a,b,c,d){var f=this;var e=f.tweenMotionList;if(e&&e.length){var g=e[e.length-1];var h=g[2];if(h){h.onComplete=a;h.onCompleteParams=b;h.completeApply=d}else{g[2]={onComplete:a,onCompleteParams:b,completeApply:d,forceAdd:true}}}else{f.onComplete=a;f.completeParam=b;f.completeApply=d}f.isKeepComplete=c;return f};kiscore.SimpleTween=_}());(function(){"use strict";var _=kiscore.KEvent;function $(c){var d=this;d.url=c;d.method="GET";d.data=new Object();d.requestHeaders=[]}function a(){var c=this;c.k_ctor();c.autoDestory=false;c.dataFormat="text";var d=c;c.onProgress=function(e){var f=d;if(e.lengthComputable){var g=new _("progress");g.loaded=e.loaded;g.total=e.total;f.dispatchEvent(g);　　　　}};c.onreadystatechange=function(){var e=d;var f=e.xmlhttp;var g=f.readyState;if(e.onreadystatechangeID){clearTimeout(e.onreadystatechangeID);e.onreadystatechangeID=-1}if(g==4){if(f.status==200||f.status==206){if(e.dataFormat=="binary"){if(f.responseType=="arraybuffer"){e.data=new Uint8Array(f.response)}else{var h=e.data=[];var i=f.responseText;for(var j=0,k=i.length;j<k;j++){　　var l=i.charCodeAt(j);　　h.push(l&0xff);　　}}}else if(e.dataFormat=="arraybuffer"||e.dataFormat=="blob"){e.data=f.response}else{if(f.responseXML)e.xmldata=f.responseXML;e.data=f.responseText}if(!e.autoDestory&&isIE6){e.reset()}e.dispatchEvent(new _("complete"));delete e.data;delete e.xmldata}else{if(!e.autoDestory&&isIE6){e.reset()}e.dispatchEvent(new _("error"))}if(e.autoDestory){e.destory()}}else if(g==0){}else if(g==1){e.dispatchEvent(new _("open"))}else if(g==2){}else if(g==3){e.onreadystatechangeID=setTimeout(e.onTimeOutError,4000,e)}};c.reset()}var b=a.prototype;b.k_ctor=function(){var c=this;c.callSuperMethod(a.super_p.k_ctor)};b.onTimeOutError=function(c){if(c.autoDestory){c.dispatchEvent(new _("error"));c.destory()}else{c.reset();c.dispatchEvent(new _("error"))}};b.reset=function(){var c=this;if(c.xmlhttp){c.xmlhttp.abort();delete c.xmlhttp.onreadystatechange;delete c.xmlhttp}if(window.XMLHttpRequest){c.xmlhttp=new XMLHttpRequest()}else{c.xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}c.xmlhttp.onreadystatechange=c.onreadystatechange};b.upload=function(c){var m=this;var d=c.requestHeaders;var e=c.data;var f=new FormData();for(var g in e){var h=e[g];if(h instanceof Array){var i=h.length;for(var j=0;j<i;j++){f.append(g+"[]",h[j])}}else{f.append(g,h)}}var k=c.url;var l=m.xmlhttp;l.abort();l.onprogress=m.onProgress;l.onreadystatechange=m.onreadystatechange;l.open("POST",k,true);if(d){var i=d.length;for(var j=0;j<i;j++){l.setRequestHeader(d[j].name,d[j].value)}}l.send(f)};b.load=function(c){var e=this;var d=c.method.toUpperCase();if(d=="UPLOAD"){e.upload(c);return}var f=c.requestHeaders;var g=c.data;var h=(d=="POST");var i=(d=="GET");var j="";if(typeof (g)=="object"){for(var k in g){var l=g[k];if(typeof (l)=="string"){if(h){l=encodeURIComponent(l)}else{l=encodeURIComponent(l)}j+=k+"="+l+"&"}else if(l instanceof Array){var m=l.length;for(var n=0;n<m;n++){j+=k+"[]="+l[n]+"&"}}else{j+=k+"="+l+"&"}}if(j){j=j.substr(0,j.length-1)}}else{j=g}var o=c.url;if(i&&j){if(o.indexOf("?")!=-1){o+="&"+j}else{o+="?"+j}}var p=e.xmlhttp;if(!isIE){try{p.abort()}catch(e){}}p.onreadystatechange=e.onreadystatechange;p.onprogress=e.onProgress;p.open(d,o,true);var q=e.dataFormat;if(q=="binary"){if(p.responseType!=undefined){p.responseType="arraybuffer"}else{p.overrideMimeType("text/plain; charset=x-user-defined")}}else if(q=="blob"||q=="arraybuffer"){if(p.responseType!=undefined){p.responseType=q}}if(h){if(!f){f=[]}var r=true;var m=f.length;for(var n=0;n<m;n++){if(f[n].name=="Content-Type"){r=false;break}}if(r&&typeof (g)=="object"){f.push({name:"Content-Type",value:"application/x-www-form-urlencoded"})}}if(f){var m=f.length;for(var n=0;n<m;n++){p.setRequestHeader(f[n].name,f[n].value)}}p.send(i?"":j)};b.destory=function(){var c=this;c.clearAllEventListener();if(c.xmlhttp){delete c.xmlhttp.onreadystatechange;c.xmlhttp.abort()}for(var d in c){delete c[d]}};KISU.extend(a,kiscore.EventDispatcher);kiscore.URLRequest=$;kiscore.URLLoader=a}());(function(){"use strict";var _=new Object();var $=_;$.ht=new kiscore.Hashtable();$.p_ht=new kiscore.Hashtable();$.frameSecond=0;$.lastTimer=0;$.intervalID=-1;$.framerate=30;$.ptime=0;$.time=0;$.paused=false;$.checking=false;$.outsideCheck=false;$.tweenFrameCheck=function(){var b=_;var c=true;b.time=getTimer()-b.ptime;var d=b.ht.getValues().slice(0);var e=d.length;for(var f=0;f<e;f++){var g=d[f];var h=g?g.length:0;for(var j=0;j<h;j++){var k=g[j];k.update(b.time);if(k.done&&!k.ignore){g.splice(j,1);h--;j--;var l=k.tweenMotionList;if(l){k.tweenMotionList=null;b.tos(l,k)}}}}d=b.ht.getValues();var e=d.length;for(var j=0;j<e;j++){var g=d[j];if(g&&g.length==0){b.ht.deleteValueAt(j);j--;e--}c=false}if(c){b.frameSecond=0;b.lastTimer=0;b.time=0;b.ptime=0;b.stopFrameCheck()}else{var m=0;if(b.lastTimer>0){m=getTimer()-b.lastTimer;b.frameSecond+=m}b.lastTimer=getTimer();var n=2000/b.framerate-m;if(n<=5){n=5}b.intervalID=setTimeout(b.tweenFrameCheck,n)}};$.stopFrameCheck=function(){var c=this;var b=c;b.checking=false;if(!b.outsideCheck){if(b.intervalID!=-1){clearTimeout(b.intervalID);b.intervalID=-1}}};$.startFrameCheck=function(){var c=this;var b=c;b.checking=true;if(!b.outsideCheck){if(b.intervalID==-1){b.intervalID=setTimeout(b.tweenFrameCheck,1000/b.framerate)}}};$.addTween=function(b,c,d,e,f,g){var h=this;if(!b){return}if(!h.ht){h.ht=new Hashtable()}if(f==undefined){f=true}var j;var k=false;var l=false;var m;var n;var o=new Object();var p=new Object();var q=new Object();var r;var s;var t;var u=undefined;var v=undefined;var w=undefined;var x;var y;var z;var A;var B;var C=h.easeOut;var D=2;var E=0;var F;var G;var H;var I;var J;var K=0;var L=0;var M=0;var N=0;var O=0;var P=0;var Q=0;var R=0;e=!!e;if(d.delay)E=f?d.delay*1000:d.delay;if(d.hasOwnProperty("overwrite")){D=d.overwrite}var S=b;var T=d.apply==undefined&&g?g.applyTarget:undefined;if(d.apply){T=d.apply;v=w=u=T}if(d.startApply){u=d.startApply}if(d.updateApply){w=d.updateApply}if(d.completeApply){v=d.completeApply}if(E==0){for(var U in d){if(U=="apply"){}else if(U=="delay"){}else if(U=="completeApply"||U=="updateApply"||U=="startApply"){}else if(U=="overwrite"){}else if(U=="onStart"){r=d[U]}else if(U=="onStartParams"){x=d[U]}else if(U=="onUpdate"){s=d[U]}else if(U=="onComplete"){t=d[U]}else if(U=="onUpdateParams"){z=d[U]}else if(U=="onCompleteParams"){y=d[U]}else if(U=="ease"){if(d[U]!=null){C=d[U]}}else if(U=="easeParam"){A=d[U]}else if(U=="bezier"){G=true;J=d[U]}else if(U=="startTimePosition"){K=Math.round(d[U])}else if(U=="bezierThrough"){H=Boolean(d[U])}else if(U=="TweenMotionList"){F=d[U]}else if(U=="forceAdd"){k=true;l=true}else if(b[U]!=undefined){if(E){q[U]=e;o[U]=d[U]}else{if(!e){var $=S[U];var V=d[U]}else{$=d[U];V=S[U]}var W=Math.abs(V-$);if(isNaN(m)||W>n){n=W;m=V-$;j=$}if(typeof (S[U])=="boolean"){p[U]=V-$}o[U]=V-$;q[U]=$;if(U=="x"||U=="y"){L=1}else if(U=="width"||U=="height"){M=1}else if(U=="scaleX"||U=="scaleY"){N=1}else if(U=="rotation"||U=="rotationX"||U=="rotationY"){O=1}else if(U=="alpha"){P=1}else if(U=="visible"){R=1}else{Q=1}}k=true}}}else{k=true;F=d.tweenMotionList;d.delay=0;var X=[b,c,d,e,f];if(F){F.unshift(X)}else{F=[X]}if(D!=4){D=0}else{D=1}c=0}if(k){if(G){if(m==0){m=1}var Y=new Object(),i,p;var Z=J.length;for(i=0;i<Z;i++){for(p in J[i]){if(Y[p]==undefined){Y[p]=[q[p]]}Y[p].push(J[i][p])}}for(p in Y){if(o[p]!=undefined)Y[p].push(q[p]+o[p])}I=h.parseBeziers(Y,H)}var $_=h.p_ht.getValue(b);var $$;if($_){$$=h.p_ht}else{$_=h.ht.getValue(b);$$=h.ht}if(!$_||D==1){$_=new Array();$$.addValue(b,$_)}else if(D==2||D==3||D==5){var $a=new Array();for(var U in o){$a.push(U)}Z=$_.length;if(Z!=0){for(i=0;i<Z;i++){var $b=$_[i];var $c=$b.propertys;for(var $d in $a){var U=$a[$d];if(U!="sortOn"&&$c.hasOwnProperty(U)&&o.hasOwnProperty(U)){if(D==2||D==5){$b.deleteProp(U,D)}else if(D==3){delete o[U];delete p[U]}}}var $e=true;for(var U in $c){$e=false;break}if($e&&!$b.tweenMotionList){$b.ignore=true;$_.splice(i,1);Z--;i--}}if(!l){$e=true;for(var U in o){$e=false;break}}else{$e=false}if($e&&!F){return null}}}var $f;if(g){$f=g;g.resetConstruct(S,o,p,q,C,E,T,r,s,t,x,z,y,A,j,m,f?c*1000:c,getTimer()-h.ptime-K,I,f,u,w,v)}else{$f=new kiscore.SimpleTween(S,o,p,q,C,E,T,r,s,t,x,z,y,A,j,m,f?c*1000:c,getTimer()-h.ptime-K,I,f,u,w,v)}if(F){$f.tweenMotionList=F}$f.hMove=L;$f.hSize=M;$f.hScale=N;$f.hRotation=O;$f.hAlpha=P;$f.hOther=Q;$f.hVisible=R;$_.push($f);h.tryresume();return $f}return null};$.easeOut=function(b,$,c,d){return (1-(b=1-(b/d))*b)*c+$};$.noneease=function(b,$,c,d){return c*b/d+$};$.to=function(b,c,d,e){var f=this;if(e==undefined){e=true}return f.addTween(b,c,d,false,e)};$.from=function(b,c,d,e){var f=this;if(e==undefined){e=true}return f.addTween(b,c,d,true,e)};$.tos=function(b,c){var f=this;var d=b.length;if(d>0){var e=b.shift();if(b.length>0){e[2].TweenMotionList=b}if(c){e.push(c)}f.addTween.apply(f,e)}};$.containTweens=function(b){var c=this;if(b!=null){return c.ht.getValue(b)}else{return c.ht.size()>0}};$.containTarget=$.containTweens;$.killTweensOf=function(b,c){var f=this;var d;if(b==null){if(c){var e=f.ht.getValues();var g=e.length;for(var h=0;h<g;h++){d=e[h];var j=d.length;for(var k=0;k<j;k++){var l=d[k];l.finish()}d.splice(0,d.length)}}f.ht=new Hashtable()}else{if(c){d=f.ht.getValue(b);if(d){var j=d.length;for(k=0;k<j;k++){l=d[k];l.finish()}}}f.ht.deleteKey(b)}};$.pause=function(b){var d=this;if(b){var c=d.ht.getValue(b);if(c){d.p_ht.addValue(b,c);d.ht.deleteKey(b)}}else{d.paused=true;d.stopFrameCheck()}};$.tryresume=function(){var b=this;if(!b.paused){b.startFrameCheck()}};$.resume=function(b){var d=this;if(b){var c=d.p_ht.getValue(b);if(c){var e=c.length;for(var f=0;f<e;f++){var g=c[f];g.baseT=getTimer()-d.ptime-g.t}d.ht.addValue(b,c);d.p_ht.deleteKey(b)}d.startFrameCheck()}else{if(d.paused){d.paused=false;d.ptime=getTimer()-d.time;d.startFrameCheck()}}};$.parseBeziers=function(b,c){var d,a,$,p;var e={};if(c){for(p in b){a=b[p];e[p]=$=[];if(a.length>2){$[$.length]=[a[0],a[1]-((a[2]-a[0])/4),a[1]];for(d=1;d<a.length-1;d++){$[$.length]=[a[d],a[d]+(a[d]-$[d-1][1]),a[d+1]]}}else{$[$.length]=[a[0],(a[0]+a[1])/2,a[1]]}}}else{for(p in b){a=b[p];e[p]=$=[];if(a.length>3){$[$.length]=[a[0],a[1],(a[1]+a[2])/2];for(d=2;d<a.length-2;d++){$[$.length]=[$[d-2][2],a[d],(a[d]+a[d+1])/2]}$[$.length]=[$[$.length-1][2],a[a.length-2],a[a.length-1]]}else if(a.length==3){$[$.length]=[a[0],a[1],a[2]]}else if(a.length==2){$[$.length]=[a[0],(a[0]+a[1])/2,a[1]]}}}return e};kiscore.TweenMotion=_}());(function(){"use strict";var _=Math.PI/180;var $=kiscore.TweenMotion;var a=kiscore.LaterFrameTable;var b=kiscore.EventDispatcher;var c=kiscore.Matrix;function d(f){var g=this;g.k_ctor(f);g.style.overflow="auto"}d.shareMatrix=new c();d.shareReg0=/matrix\((.{0,})\)/g;d.RefreshSizeList=[];d.addRefreshSize=function(f){var g=d.RefreshSizeList;if(!stage.contains(f)){g.push(f)}};d.refreshSizelist=function(){var f=d.RefreshSizeList;var g=f.length;for(var h=0;h<g;h++){var i=f[h];if(i.parent&&stage.contains(i.parent)){i.refreshSize();f.splice(h,1);h--;g--}}};KISU.extend(d,b);var e=d.prototype;e.k_ctor=function(f){var g=this;if(g.target&&g.target.proxy==g)return;g.callSuperMethod(d.super_p.k_ctor);if(f==undefined)f="div";g.createMCTarget(f);g.k_init();if(g.position)g.style.position=g.position};e.k_init=function(){var f=this;f.parent=null;f.visible=true;f.x=0;f.y=0;f.right=0;f.bottom=0;f.bgImage_x=0;f.bgImage_y=0;f.width=-1;f.height=-1;f.alpha=1;f.rotation=0;f.scaleX=1;f.scaleY=1;f.IEMFX=0;f.IEMFY=0;f.i_l_alpha=1;f.i_l_rotation=0;f.i_l_scaleX=1;f.i_l_scaleY=1;f.childrenhighDepth=0;f.border=undefined;f.borderWidth=1;f.borderStyle="solid";f.borderColor="black";f.background=undefined;f.backgroundColor="white";f.backgroundImage="";f.style.boxSizing="border-box";if(f.style.transform!=undefined){f.sTFStr="transform"}else if(f.style.webkitTransform!=undefined){f.sTFStr="webkitTransform"}else if(f.style.MozTransform!=undefined){f.sTFStr="MozTransform"}else if(f.style.msTransform!=undefined){f.sTFStr="msTransform"}else if(f.style.OTransform!=undefined){f.sTFStr="OTransform"}f.style[f.sTFStr+"Origin"]="top left";f.style.position="absolute"};e.Constructor=function(f){var g=this;if(!g.events){b.prototype.k_ctor.apply(g);KISU.efun(g,b.prototype)}KISU.efun(g,d.prototype);if(f==undefined)f="div";g.createMCTarget(f);g.k_init()};e.createMCTarget=function(f){var h=this;var g;if((typeof f)=="string"){g=document.createElement(f)}else{g=f}h.MCTarget=g;h.style=h.MCTarget.style;h.MCTarget.proxy=h};e.destory=function(f){var g=this;if(g.clearAllEventListener)g.clearAllEventListener();if(f&&g.MCTarget){var h=g.MCTarget.childNodes;var i=h.length;for(var j=0;j<i;j++){var k=h[j];if(k&&k.nodeType==1){var l=k.proxy;if(l){k.proxy=undefined;k.id=undefined;k.name=undefined;k.tabIndex=0;l.destory(true)}}}}if(g.MCTarget){if($.containTarget(g)){$.killTweensOf(g)}a.removeOf(g);if(g.MCTarget.innerHTML)g.MCTarget.innerHTML="";g.MCTarget.removeNode&&g.MCTarget.removeNode(true);if(g.interKISEvtTable){for(var m in g.interKISEvtTable){delete g.interKISEvtTable[m]}}for(var m in g){delete g[m]}}};e.setFocus=function(){var f=this;if(isIE){f.MCTarget.hidefocus=true}else{f.MCTarget.tabIndex=1;f.style.outline="none"}f.MCTarget.focus()};e.setID=function(f){var h=this;var g=h.MCTarget.id;g=!g?"":g;var e=!f?"":f;if(g!=e){h.id=f;h.MCTarget.id=f;d.addRefreshSize(h)}};e.refreshSize=function(){var f=this;f.setSize(f.width,f.height)};e.setName=function(f){var h=this;var g=h.MCTarget.name;g=!g?"":g;var e=!f?"":f;if(g!=e){h.name=f;h.MCTarget.name=f}};e.setClassName=function(f){var h=this;var g=h.MCTarget.className;g=!g?"":g;var e=!f?"":f;if(g!=e){h.className=f;h.MCTarget.className=f}};e.parseFromPool=function(f,g,h,i){var k=this;var j=i||k;var l=f.length;for(var m=0;m<l;m+=2){var n=h[f[m]];var o=h[f[m+1]];if(o instanceof Array){var p;if(isNaN(h[o[0]])){p={}}else{p=[]}j[n]=p;k.parseFromPool(o,g,h,p)}else{j[n]=o}}if(!i){f.splice(0)}};e.parseProps=function(f){var i=this;for(var g in f){var h=f[g];i[g]=h}};e.getRect=function(f,g){var i=this;var h=i.getSize();if(g){h.x=i.width;h.y=i.height}else{h.x=h.width;h.y=h.height}var j=[{x:0,y:0},h];var k;if(f){k=i.local2Target(f,j)}else{k=i.local2Global(j)}var l=k[0];var m=k[1];h.width=m.x-l.x;h.height=m.y-l.y;h.x=l.x;h.y=l.y;return h};e.getPos=function(){var f=this;if(f.position=="static" ){var g=f.MCTarget;var h=f.MCTarget.parentNode;if(g.offsetParent==h&&h){return {x:g.offsetLeft,y:g.offsetTop}}else{return {x:g.offsetLeft-h.offsetLeft,y:g.offsetTop-h.offsetTop}}}else{return {x:f.x,y:f.y}}};e.hitTestObject=function(f){var h=this;var g=h.getRect();var i=f.getRect();if(g==null||i==null){return false}return h.hitTestRect(g,i)};e.hitTestPoint=function(f){var h=this;var g=h.getRect();if(g==null||f==undefined){return false}if(f.x<g.x||f.x>g.x+g.width||f.y<g.y||f.y>g.y+g.height){return false}return true};e.hitTestRect=function(f,g){var h=true;if(f.x>(g.x+g.width)){h=false}else if((f.x+f.width)<g.x){h=false}else if((f.y+f.height)<g.y){h=false}else if(f.y>(g.y+g.height)){h=false}return h};e.l2gMatrix=function(f,g){var h=this;f=f||h;if(f.MCTarget)f=f.MCTarget;if(g&&g.MCTarget)g=g.MCTarget;if(!g){g=document.body}var i=f.offsetLeft;var j=f.offsetTop;var k=f;f=f.offsetParent;var l=d.shareMatrix.identity();var m=k.style[h.sTFStr],ix;var n=d.shareReg0;var o=new Array(6);if(m&&(ix=m.indexOf("matrix("))!=-1){n.lastIndex=-1;var p=n.exec(m);var q=p[1].split(",");for(var s=0;s<6;s++){o[s]=parseFloat(q[s])}l.prepend(o[0],o[1],o[2],o[3],o[4]+i,o[5]+j)}else{l.prepend(1,0,0,1,i,j)}while(f&&f!=g){var u,yy;u=f.offsetLeft-f.scrollLeft;yy=f.offsetTop-f.scrollTop;var m=f.style[h.sTFStr],ix;if(m&&(ix=m.indexOf("matrix("))!=-1){n.lastIndex=-1;var p=n.exec(m);var q=p[1].split(",");for(var s=0;s<6;s++){o[s]=parseFloat(q[s])}l.prepend(o[0],o[1],o[2],o[3],o[4]+u,o[5]+yy)}else{l.prepend(1,0,0,1,u,yy)}f=f.offsetParent}return l};e.local2Global=function(f,g,h){var j=this;if(!f)f={x:0,y:0};var i=j.l2gMatrix(g,h);if(f instanceof Array){var k=f.length;for(var l=0;l<k;l++){var m=f[l];i.transformPoint(m.x,m.y,m)}return f}return i.transformPoint(f.x,f.y,f)};e.getTransformMatrix=function(){var g=this;var f=g.style[g.sTFStr];var h=null;if(f){var i=f.indexOf("matrix(");if(i!=-1){h=new c();var j=0;i+=7;var k=i;while(i!=-1){var k=f.indexOf(",",i);if(k!=-1){var l=parseFloat(f.substring(i,k));if(j==0){h.a=l}else if(j==1){h.b=l}else if(j==2){h.c=l}else if(j==3){h.d=l;break}j++;i=k+1}}return h}}return null};e.local2Target=function(f,g){var h=this;if(!g)g={x:0,y:0};if(f==h)return g;if(f.contains(h)){g=h.local2Global(g,h,f)}else if(h.contains(f)){g=f.local2Global(g,f,h)}else{g=h.local2Global(g);var i=f.local2Global({x:0,y:0});if(g instanceof Array){var j=g.length;for(var k=0;k<j;k++){var l=g[k];l.x=l.x-i.x;l.y=l.y-i.y}}else{g.x=g.x-i.x;g.y=g.y-i.y}}return g};e.setFloat=function(f){var g=this;if(f=="left"||f=="right"){g.cssFloat=f;if(g.style.position=="absolute"&&g.position!="absolute"){g.position=g.style.position="static" }g.style.cssFloat=f;g.style.styleFloat=f}else{g.style.styleFloat="none";g.cssFloat="none"}};e.setScrollFlow=function(f){var g=this;g.scrollFlow=f;if(f==undefined){return}if(g.i_l_scrollFlow==f){return}g.i_l_scrollFlow=f;if(f==""||f=="auto"){g.style.overflowX="auto";g.style.overflowY="auto"}else if(f=="scrollH"){g.style.overflowX="auto";g.style.overflowY="hidden"}else if(f=="scrollV"){g.style.overflowX="hidden";g.style.overflowY="auto"}else if(f=="scroll"){g.style.overflowX="scroll";g.style.overflowY="scroll"}else if(f=="hidden"){g.style.overflowX="hidden";g.style.overflowY="hidden"}else if(f=="visible"){g.style.overflowX="visible";g.style.overflowY="visible"}};e.setPosition=function(f){var h=this;var g=h.position;if((g=="absolute"||g=="relative")&&(f!="absolute"&&f!="relative")){var i=h.style[h.sTFStr],ix;var j=d.shareReg0;var k=new Array(6);if(i&&(ix=i.indexOf("matrix("))!=-1){j.lastIndex=-1;var l=j.exec(i);var m=l[1].split(",");for(var n=0;n<6;n++){k[n]=parseFloat(m[n])}if(k[0]==1&&k[1]==0&&k[2]==0||k[3]==1){h.style.transform=""}else{k[4]=0,k[5]=0;h.style[h.sTFStr]="matrix("+k.join(",")+")"}}}else if((g!="absolute"&&g!="relative")&&(f=="absolute"||f=="relative")){if(h.style.left!="0px"){h.style.left="0px"}if(h.style.top!="0px"){h.style.top="0px"}}if(f=="relative"||f=="static" ||f=="fixed"){h.style.position=f;h.position=f}else{h.style.position="absolute";h.position=f}};e.registEventHandler=function(f,g,h,i){f=f||window.event;f.mouseX=f.clientX;f.mouseY=f.clientY;var j=f.keyCode;if(!isNaN(f.which)){j=f.which}stage.event=f;if(g.proxy[i]){var k=g.proxy[i];var l;if(k.applyTarget){l=k.apply(k.applyTarget,[f])}else{var l=k(f)}if(l===false){if(f.preventDefault){f.stopPropagation();f.preventDefault()}f.cancelBubble=true;f.returnvalue=false;return false}}var m=new kiscore.KEvent(h);if(f.srcElement&&f.srcElement.proxy){m.target=f.srcElement.proxy}m.button=f.button;if(f.dataTransfer)m.dataTransfer=f.dataTransfer;if(f.clipboardData)m.clipboardData=f.clipboardData;if(f.clientX!=undefined){m.mouseX=f.clientX;m.mouseY=f.clientY}else if(f.changedTouches){m.mouseX=f.changedTouches[f.changedTouches.length-1].pageX;m.mouseY=f.changedTouches[f.changedTouches.length-1].pageY;m.changedTouches=f.changedTouches;if(m.mouseX==0&&m.mouseX==m.mouseY){m.mouseX=-f.layerX;m.mouseY=-f.layerY}}if(f.offsetX!=undefined){m.localX=f.offsetX;m.localY=f.offsetY}else{m.localX=f.layerX;m.localY=f.layerY}if(f.wheelDelta!=undefined){m.delta=f.wheelDelta/120*3}else{var n=f.detail;if(n==3){n=-3}else{n=3}m.delta=n}m.keyCode=j;m.ctrlKey=f.ctrlKey;m.shiftKey=f.shiftKey;m.altKey=f.altKey;g.proxy.dispatchEvent(m);if(m.isDefaultPrevented()){if(f.preventDefault){f.stopPropagation();f.preventDefault()}f.cancelBubble=true;f.returnvalue=false;if(f.srcElement&&f.srcElement.tagName&&f.srcElement.tagName.toLowerCase()=="input"){return false}return false}};e.registEvent=function(f,g,h,i){var j=f.interKISEvtTable;if(!j){j=f.interKISEvtTable=new Object()}var k=j[h];if(k){return}k=j[h]=function(n){d.prototype.registEventHandler.apply(f,[n,f,h,i])};var l=f.addEventListener||f.attachEvent;var m=h;if(l==f.attachEvent){m=g}if(l.apply)l.apply(f,[m,k]);else l(m,k)};e.unregistEventHandler=function(f,g,h,i){var j=f.proxy;if(j){delete j[i];j.removeEvent(h)}var k=f.interKISEvtTable;if(!k){return}var l=k[h];if(!l){return}delete k[h];var m=f.removeEventListener||f.detachEvent;var n=h;if(m==f.detachEvent){n=g}if(m.apply)m.apply(f,[n,l]);else m(n,l)};e.uninteractive=function(f,g){var h=this;if(!f){f=h.MCTarget}var i=h.unregistEventHandler;if(g){var j=g.length;for(var k=0;k<j;k++){var l=g[k];i(f,l[0],l[1],l[2])}}};e.interactive=function(f,g){var h=this;if(!f){f=h.MCTarget}var i=h.registEvent;if(g){var j=g.length;for(var k=0;k<j;k++){var l=g[k];i(f,l[0],l[1],l[2])}}};e.addETL=function(f,g,h,i){var j=this;if(!i)j.interactive(null,[["on"+f,f]]);j.addEventListener(f,g,h)};e.removeETL=function(f,g,h,i){var j=this;j.removeEventListener(f,g,h);if(!j.hasEventListener(f)){if(!i)j.uninteractive(null,[["on"+f,f]])}};e.stopDrag=function(){var f=this;stage.setStyle("cursor","");stage.removeETL(KISU.mm,f.onDragMMove,f);stage.removeETL(KISU.mm,f.onDragMMoveOffset,f);stage.setSelectable(true)};e.getRelativePos=function(){var g=this;var f=g.style.position;var h;var i=g.style.cssFloat;if(f=="relative"){h={x:g.style.left,y:g.style.top}}else if(f=="static" ){if(i=="right")h={x:g.style.marginRight,y:g.style.marginTop};else h={x:g.style.marginLeft,y:g.style.marginTop}}else{return g.getPos()}h.x=Number(h.x.replace(/[^0-9\.-]/g,""));h.y=Number(h.y.replace(/[^0-9\.-]/g,""));h.x=isNaN(h.x)?0:h.x;h.y=isNaN(h.y)?0:h.y;return h};e.onDragMMoveOffset=function(f){var h=this;var g=h;var i=g.tempDragMatrix.transformPoint(f.mouseX,f.mouseY,g.tempDragPoint2);var j=i.x-g.tempDragPoint.x;var k=i.y-g.tempDragPoint.y;var l=g.tempDragOffset;if(Math.abs(j)>=l||Math.abs(k)>=l){g.startDrag.apply(g,h.tempDragParams);return}};e.onDragMMove=function(f){var h=this;var g=h;var i=h.tempDragParams;var j=i[1];var k=i[2];var l=i[3];var m=i[4];var n=i[5];var o=i[6];var p=i[10];var q=i[11];var s=i[12];var u=g.tempDragMatrix.transformPoint(f.mouseX,f.mouseY,g.tempDragPoint2);var v=u.x-g.tempDragPoint.x;var w=u.y-g.tempDragPoint.y;if(p)q.x-=v;else q.x+=v;q.y+=w;s.x=q.x;s.y=q.y;if(l){l.apply(o,[s])}if(k){var x,t,r,e;x=k.x;t=k.y;r=k.x+k.width;e=k.y+k.height;if(q.x<x){s.x=x}else if(q.x>r){s.x=r}if(q.y<t){s.y=t}else if(q.y>e){s.y=e}if(!j){q.x=s.x;q.y=s.y}}g.tempDragPoint.x=g.tempDragPoint2.x;g.tempDragPoint.y=g.tempDragPoint2.y;if(m){var y=m.apply(o,[s,q]);if(y){return}}g.move(s.x,s.y);if(n){n.apply(o,[s,q])}};e.startDrag=function(f,g,h,i,j,k,l,m,n,o){var p=this;stage.setStyle("cursor",p.getStyle("cursor")||"default");p.tempDragMatrix=p.l2gMatrix(p.parent||p.MCTarget.offsetParent).clone().invert();p.tempDragPoint=p.tempDragMatrix.transformPoint(stage.event.mouseX,stage.event.mouseY);p.tempDragPoint2={x:0,y:0};var q=isNaN(n)?true:false;p.tempDragOffset=n;var s=p;var u=l||s;p.tempDragParams=[f,g,h,i,j,k,u,m,undefined,o];stage.setSelectable(false);if(!q){stage.addETL(KISU.mm,p.onDragMMoveOffset,p);return}if(f){p.move(p.tempDragPoint.x,p.tempDragPoint.y)}else{if(m=="absolute"){var v=p.getPos();var w=p.parent.style.paddingLeft;if(w){v.x-=parseInt(w.replace("px",""))}var x=p.parent.style.paddingTop;if(x){v.y-=parseInt(x.replace("px",""))}p.setPosition(m);p.move(v.x,v.y)}}var y=s.getRelativePos();var z={x:y.x,y:y.y};if(o){o.apply(u)}var A=false;if(s.style.cssFloat=="right"&&p.style.position!="absolute")A=true;p.tempDragParams.push(A,y,z);stage.addETL(KISU.mm,p.onDragMMove,p)};e.setAlpha=function(f){var g=this;if(f!=g.i_l_alpha){g.alpha=f;g.style.opacity=g.alpha;g.i_l_alpha=f}};e.setMatrix=function(f){var g=this;if(g.style.position=="absolute"){g.style[g.sTFStr]="matrix("+f.M11+","+f.M21+","+f.M12+","+f.M22+","+Math.floor(g.x)+","+Math.floor(g.y)+")"}else{g.style[g.sTFStr]="matrix("+f.M11+","+f.M21+","+f.M12+","+f.M22+",0,0)"}};e.move=function(f,g){var h=this;if(h.i_l_x==f&&h.i_l_y==g)return;var i=(typeof (f)=="string"?1:0);var j=(typeof (g)=="string"?1:0);var k=i?"":"px";var l=j?"":"px";h.x=f;h.y=g;if(isNaN(f)&&k)f=0;if(isNaN(g)&&l)g=0;if(!i){f+=h.IEMFX}if(!j){g+=h.IEMFY}if(h.style.position!="absolute"){var m=h.style.styleFloat;var n=m=="right"?"marginRight":"marginLeft";var o=m=="right"?"marginLeft":"marginRight";h.setStyle(n,f+k);h.setStyle(o,"0px");var p=h.right;var q=h.bottom;if(p>0){h.style.marginRight=(typeof (p)=="string"?p:p+"px")}h.style.marginTop=g+l;h.style.marginBottom=(typeof (q)=="string"?q:q+"px");if(h.style.posTop==undefined){h.style.left="0px";h.style.top="0px"}}else{h.drawMatrix()}h.i_l_x=h.x;h.i_l_y=h.y};e.drawMatrix=function(){var g=this;var f=g.rotation;var h=g.scaleX;var i=g.scaleY;var j=g.x;var k=g.y;g.IEMFX=0;g.IEMFY=0;var l=g.style.position=="absolute";if(g.i_l_rotation!=f||g.i_l_scaleX!=h||g.i_l_scaleY!=i||(l&&g.i_l_x!=j||g.i_l_y!=k)){var m=Math.cos(f*_),n=Math.sin(f*_);g.setMatrix({M11:m*h,M12:-n*i,M21:n*h,M22:m*i});g.i_l_rotation=f;g.i_l_scaleX=h;g.i_l_scaleY=i;if(l){g.i_l_x=j;g.i_l_y=k}}};e.setRotation=function(f){var g=this;g.rotation=f;var h=Math.cos(f*_),i=Math.sin(f*_);var j=g.scaleX;var k=g.scaleY;g.setMatrix({M11:h*j,M12:-i*k,M21:i*j,M22:h*k})};e.setScaleXY=function(f,g){var h=this;if(!isNaN(f))h.scaleX=f;if(!isNaN(g))h.scaleY=g;var i=h.rotation*_;var j=Math.cos(i),k=Math.sin(i);h.setMatrix({M11:j*f,M12:-k*g,M21:k*f,M22:j*g})};e.setVisible=function(f){var g=this;g.visible=f;var h=g.style.styleFloat;g.style.display=g.visible?"":"none"};e.getVisible=function(){var f=this;return f.style.display!="none"};e.draw=function(f){var h=this;var g=(f==undefined?1:0);if(g||f.name)h.setName(h.name);if(g||f.alpha)h.setAlpha(h.alpha);if(g||f.visible)h.setVisible(h.visible);if(g||f.position)h.setPosition(h.position);if(g||f.cssFloat)h.setFloat(h.cssFloat);if(g||f.scrollFlow)h.setScrollFlow(h.scrollFlow);if(g||f.background)h.drawBackground();if(g||f.border){h.drawBorder()}else if(g||f.size){if(h.width!=-1||h.height!=-1){h.setSize(h.width,h.height)}}if(g||f.borderRadius){h.setBorderRadius(h.borderRadius)}if(g||f.scaleX||f.scaleY||f.rotation){h.drawMatrix()}if(g||f.xy){h.move(h.x,h.y)}};e.drawBorder=function(){var f=this;if(f.border){f.style.borderStyle=f.borderStyle;f.style.borderWidth=f.borderWidth+"px";f.style.borderColor=f.borderColor}else if(f.border!==undefined){f.style.border=""}var g=f.borderformat;if(g){for(var h in g){var i=g[h];for(var j in i){var k=i[j];if(j=="Width"){k+="px"}f.style["border"+h+j]=k}}}if(f.width!=-1||f.height!=-1){f.setSize(f.width,f.height)}};e.setBackgroundColor=function(f){var g=this;g.backgroundColor=f;g.style.backgroundColor=f};e.getRPath=function(f,g){var i=this;var h=i.i_pro_data;if(h){if(f.charAt(0)=="#"){if(g==1){return h.sFolder+f.substr(1)}else if(g==2){return h.folder+f.substr(1)}else{return h.rFolder+f.substr(1)}}}return f};e.setProData=function(f){var g=this;g.i_pro_data=f;var h=g.MCTarget.childNodes;var i=h.length;for(var j=0;j<i;j++){var k=h[j];if(k.nodeType==1&&k.proxy&&k.proxy!=g){k.proxy.setProData(f)}}if(g.background)g.drawBackground()};e.drawBackground=function(){var f=this;if(f.background){f.setBackgroundColor(f.backgroundColor);var g=f.bgImage;var h=f.backgroundImage;if(g&&g.url){var i=f.getRPath(g.url);if(f.i_l_bg!=i)f.style.backgroundImage="url("+i+")";f.style.backgroundRepeat=g.repeat||"";f.moveBackground(g.x,g.y);f.i_l_bg=i}else if(h){var i=f.getRPath(h);if(f.i_l_bg!=i)f.style.backgroundImage="url("+i+")";f.style.backgroundRepeat=f.bgImage_repeat||"no-repeat";f.moveBackground(f.bgImage_x,f.bgImage_y);f.i_l_bg=i}else if(f.background!=undefined){f.style.backgroundImage="";delete f.i_l_bg}}else if(f.background!=undefined){f.style.background="";delete f.i_l_bg}};e.configSize=function(f,g){var i=this;var h=i.style.borderStyle||i.getCurrentStyle("borderStyle","border-style")||i.borderformat;if(!h){return {w:f,h:g}}else if(h=="none"){return {w:f,h:g}}if(i.style.boxSizing=="border-box"){return {w:f,h:g}}if(i.getCurrentStyle("boxSizing","box-sizing")=="border-box"||i.getCurrentStyle("box-sizing","box-sizing")=="border-box"||i.getCurrentStyle("MozBoxSizing","MozBoxSizing")=="border-box"){return {w:f,h:g}}var j=i.style.borderLeftWidth||i.getCurrentStyle("borderLeftWidth","border-left-width");var k=i.style.borderTopWidth||i.getCurrentStyle("borderTopWidth","border-top-width");var l=i.style.borderRightWidth||i.getCurrentStyle("borderRightWidth","border-right-width");var e=i.style.borderBottomWidth||i.getCurrentStyle("borderBottomWidth","border-bottom-width");var m=i.style.paddingLeft||i.getCurrentStyle("paddingLeft","padding-left");var n=i.style.paddingTop||i.getCurrentStyle("paddingTop","padding-top");var o=i.style.paddingRight||i.getCurrentStyle("paddingRight","padding-right");var p=i.style.paddingBottom||i.getCurrentStyle("paddingBottom","padding-bottom");var q=(typeof (f)=="string"?1:0);var s=(typeof (g)=="string"?1:0);if(!q){if(j){f-=Number(j.replace(/[a-z]/g,""))}if(l){f-=Number(l.replace(/[a-z]/g,""))}if(m){f-=Number(m.replace(/[a-z]/g,""))}if(o){f-=Number(o.replace(/[a-z]/g,""))}}if(!s){if(k){g-=Number(k.replace(/[a-z]/g,""))}if(e){g-=Number(e.replace(/[a-z]/g,""))}if(n){g-=Number(n.replace(/[a-z]/g,""))}if(p){g-=Number(p.replace(/[a-z]/g,""))}}return {w:f,h:g}};e.getCurrentStyle=function(f,g,h){var j=this;var i=h||j.MCTarget;if(g==undefined)g=f;if(i.currentStyle){return i.currentStyle[f]}else if(document.defaultView){var k=document.defaultView.getComputedStyle(i,null);if(!k){return}var l=k.getPropertyValue(g);if(!l){l=k[f]}return l}else if(window.getComputedStyle){var k=window.getComputedStyle(i,"");if(!k){return}return k.getPropertyValue(g)}};e.getSize=function(){var g=this;var f=g.MCTarget;return {width:f.offsetWidth,height:f.offsetHeight}};e.getInnerSize=function(){var g=this;var f=g.MCTarget;return {width:f.scrollWidth,height:f.scrollHeight}};e.setSize=function(f,g){var h=this;if(h.i_l_w==f&&h.i_l_h==g)return;h.width=f;h.height=g;var i=(typeof (f)=="string"?1:0);var j=(typeof (g)=="string"?1:0);var k;if(!i||!j){k=h.configSize(f,g)}if(i){h.style.width=f}else{f=k.w;h._width=f;if(f>-1){h.style.width=f+"px"}else{f=-1;h.style.width=""}}if(j){h.style.height=g}else{g=k.h;h._height=g;if(g>-1){h.style.height=g+"px"}else{g=-1;h.style.height=""}}h.handleChildrenSize(f,g)};e.handleChildrenSize=function(f,g){var h=this;if(h.i_l_w!=f||h.i_l_h!=g)h.fixChildrenSize();h.i_l_w=h.width;h.i_l_h=h.height};e.fixChildrenSize=function(f){var g=this;if(g.sizeChildren){var h=g.MCTarget;var i;var j;var k=h.style.overflowY;if(!k||k=="auto"){if(h.scrollHeight>h.offsetHeight){i=g._width-(h.offsetWidth-h.clientWidth)}else{i=g._width}}else if(k=="scroll"){i=g._width-(h.offsetWidth-h.clientWidth)}else{i=g._width}k=h.style.overflowX;if(!k||k=="auto"){if(h.scrollWidth>h.offsetWidth){j=g._height-(h.offsetHeight-h.clientHeight)}else{j=g._height}}else if(k=="scroll"){j=g._height-(h.offsetHeight-h.clientHeight)}else{j=g._height}if(f){var l=f;if(l.posSize){var m=l.fixPosSize(l.posSize,i,j);if(m.x!=l.x||m.y!=l.y)l.move(m.x,m.y);if(m.w!=l.width||m.h!=l.height)l.setSize(m.w,m.h)}return}var n=h.childNodes;var o=n.length;for(var p=0;p<o;p++){var l=n[p];if(l.nodeType==1){l=l.proxy;if(l&&l.posSize){var m=l.fixPosSize(l.posSize,i,j);if(m.x!=l.x||m.y!=l.y)l.move(m.x,m.y);if(m.w!=l.width||m.h!=l.height)l.setSize(m.w,m.h)}}}}};e.moveBackground=function(f,g){var h=this;if(f+"px"!=h.style.backgroundPositionX||g+"px"!=h.style.backgroundPositionY){h.bgImage_x=f;h.bgImage_y=g;h.style.backgroundPosition=f+"px "+g+"px"}};e.swapChildren=function(f,g){var h=this;if(f.style.position!="absolute"){if(f.MCTarget){h.MCTarget.insertBefore(f.MCTarget,g.MCTarget);f.parent=h}else{h.MCTarget.insertBefore(f,g)}f.style.zIndex=0}else if(f.style.position=="absolute"&&g.style.position=="absolute"){var i=f.style.zIndex;f.style.zIndex=g.style.zIndex;g.style.zIndex=i}};e.addChildAt=function(f,g){var i=this;var h=i.MCTarget;var j=f;if(f.MCTarget){j=f.MCTarget}if(j.parentNode!=h){i.addChild(f)}var k=h.childNodes;var l=k.length;var m=[];var n=[];for(var o=0;o<l;o++){var p=k[o];if(p.nodeType==1){p.sortIndex=o;if(p.style.position!="absolute")m.push(p);else n.push(p)}}var q=n.length;var s=m.length;l=q+s;if(g==l-1){return f}else if(g>=0&&g<=s-2){j.style.zIndex=0;h.insertBefore(j,m[g]);return f}else if(g>=0&&g==s-1){j.style.zIndex=0;var u=m[g].nextSibling;if(u){h.insertBefore(j,u)}else{h.appendChild(j)}return f}else if(g-s>=0&&g-s<q-1){i.sortArrayByDepth(n);var v=n[g];if(v!=j){j.style.zIndex=v.style.zIndex;for(var o=g;o<q;o++){if(n[o]!=j)n[o].style.zIndex++}}return f}return null};e.getChildIndex=function(f){var i=this;var g=f;if(f.MCTarget){g=f.MCTarget}var h=i.MCTarget.childNodes;var j=h.length;var k=[];for(var l=0;l<j;l++){var m=h[l];if(m.nodeType==1){m.sortIndex=l;k.push(m)}}i.sortArrayByDepth(k);j=k.length;for(var l=0;l<j;l++){if(g==k[l]){return l}}return -1};e.getChildAt=function(f){var h=this;var g=h.MCTarget.childNodes;var i=g.length;var j=[];for(var k=0;k<i;k++){var l=g[k];if(l.nodeType==1){l.sortIndex=k;j.push(l)}}if(f>=0&&f<=j.length-1){h.sortArrayByDepth(j);var m=j[f];return m.proxy||m}return null};e.getNumChildren=function(){var g=this;var f=g.MCTarget.childNodes;var h=f.length;var i=0;for(var j=0;j<h;j++){var k=f[j];if(k.nodeType==1){i++}}return i};e.getChildrensByClass=function(f){var h=this;var g=h.MCTarget.childNodes;var i=g.length;var j=0;var k=[];for(var l=0;l<i;l++){var m=g[l];if(m.nodeType==1&&m.proxy&&(m.proxy instanceof f)){k.push(m.proxy)}}return k};e.getNextHighestDepth=function(){var f=this;return f.childrenhighDepth+1};e.addChild=function(f){var h=this;var g=f;if(g.MCTarget){g=g.MCTarget;if(g.style.position!="absolute"){g.style.zIndex=0;h.MCTarget.appendChild(g)}else if(g.parentNode!=h.MCTarget){h.MCTarget.appendChild(g);g.style.zIndex=h.getNextHighestDepth();h.childrenhighDepth++}else{if((g.nextSibling&&g.nextSibling.style.position!="absolute")||(g.previousSibling&&g.previousSibling.style.position!="absolute")){h.MCTarget.appendChild(g)}if(g.style.zIndex<h.childrenhighDepth){g.style.zIndex=h.getNextHighestDepth();h.childrenhighDepth++}}if(h.i_pro_data){f.setProData(h.i_pro_data)}}else{g.style.zIndex=0;h.MCTarget.appendChild(g)}f.parent=h;d.refreshSizelist();return f};e.removeChild=function(f){var h=this;var g=f;if(f.MCTarget){g=f.MCTarget;f.parent=null}else{if(f.proxy&&f.proxy!=h){f.proxy.parent=null}else{f.parent=null}}h.MCTarget.removeChild(g);if(h.MCTarget.childNodes.length==0){h.childrenhighDepth=0}if(f.MCTarget){f.onRemoved&&f.onRemoved()}return f};e.removeChildrens=function(){var g=this;var f=g.MCTarget.childNodes;var h=f.length;for(var i=0;i<h;i++){var j=f[0];g.removeChild(j)}};e.removeSelf=function(){var f=this;if(f.parent){f.parent.removeChild(f)}};e.removeChildAt=function(f){var h=this;var g=h.MCTarget.childNodes;var i=g.length;var j=[];for(var k=0;k<i;k++){var l=g[k];if(l.nodeType==1){l.sortIndex=k;j.push(l)}}if(f>=0&&f<=j.length-1){h.sortArrayByDepth(j);var m=j[f];h.removeChild(m);if(i==1){h.childrenhighDepth=0}if(m.proxy){m.proxy.onRemoved&&m.proxy.onRemoved();return m.proxy}return m}return null};e.setStyle=function(f,g){var h=this;h.style[f]=g};e.getStyle=function(f){var g=this;return g.style[f]};e.sortArrayByDepth=function(f){var g=this;f.sort(g.sortArrayByDepthBase);return f};e.sortArrayByDepthBase=function(f,e){if(f.style.position=="absolute"&&e.style.position!="absolute"){return 1}else if(f.style.position!="absolute"&&e.style.position=="absolute"){return -1}else if(f.style.zIndex==e.style.zIndex){return f.sortIndex-e.sortIndex}else{return f.style.zIndex-e.style.zIndex}};e.getTargetPath=function(){var g=this;var f=g;var h="";while(f){h="."+(f.name?f.name:f.MCTarget.tagName+(f.parent?f.parent.getChildIndex(f):""))+h;f=f.parent}return h.substr(1,h.length-1)};e.setBorderRadius=function(f){var g=this;g.borderRadius=f;if(!f){g.setStyle("borderRadius","");return}var h,tr,bl,br;h=f.topLeft;tr=f.topRight;bl=f.bottomLeft;br=f.bottomRight;if(!h&&h!=0){return}if(!tr&&tr!=0){tr=h}if(!bl&&bl!=0){bl=h}if(!br&&br!=0){br=h}if(!h&&!tr&&!bl&&!br){g.setStyle("borderRadius","")}else{g.setStyle("borderRadius",h+"px "+tr+"px "+bl+"px "+br+"px")}};e.fixPosSize=function(f,g,h){var l=this;var i={l:f.left,r:f.right,t:f.top,b:f.bottom};var j=KISU.percent;var k={x:l.x,y:l.y,w:l.width,h:l.height};if(g>0){i.l=j(i.l,g);i.r=j(i.r,g);if(f.cxr){var m=f.cxr*k.w;if(!isNaN(i.l))i.l-=m;if(!isNaN(i.r))i.r-=k.w-m}}if(h>0){i.t=j(i.t,h);i.b=j(i.b,h);if(f.cyr){var m=f.cyr*k.h;if(!isNaN(i.t))i.t-=m;if(!isNaN(i.b))i.b-=k.h-m}}if(!isNaN(i.l)&&!isNaN(i.r)){k.x=i.l;if(g>0){k.w=g-i.r-i.l}else{k.w=-1}}else{if(!isNaN(i.l)){k.x=i.l}else if(!isNaN(i.r)){if(g>0){k.x=g-l.width-i.r}else{k.x=0}}}if(!isNaN(i.t)&&!isNaN(i.b)){k.y=i.t;if(h>0){k.h=h-i.b-i.t}else{k.h=-1}}else{if(!isNaN(i.t)){k.y=i.t}else if(!isNaN(i.b)){if(h>0){k.y=h-l.height-i.b}else{k.y=0}}}return k};e.contains=function(f){var h=this;var g=f;if(g.MCTarget){g=g.MCTarget}return h.MCTarget.contains?h.MCTarget.contains(g):!!(h.MCTarget.compareDocumentPosition(g)&16)};e.callLaterFrame=function(f,g,h){var l=this;if(!f)return;var i=[];if(arguments.length>3){var j=arguments.length;for(var k=3;k<j;k++){i.push(arguments[k])}}h=h||l;a.addOnce(f,g,h,i)};e.callLaterFrame2=function(f,g,h){var l=this;if(!f)return;var i=[];if(arguments.length>3){var j=arguments.length;for(var k=3;k<j;k++){i.push(arguments[k])}}h=h||l;a.add(f,g,h,i)};e.clearLaterFrame=function(f,g){var h=this;g=g||h;a.remove(f,g)};e.disabledSelectText=function(f){var g=f||window.event;if(g.preventDefault){g.stopPropagation();g.preventDefault()}g.cancelBubble=true;return false};e.clearSelection=function(){var g=this;if(window.getSelection){var f=window.getSelection();if(f&&f.toString()){if(!f.containsNode(g.MCTarget,true)){return}f.removeAllRanges()}}else{document.selection.empty()}};e.setSelectable=function(f,g){var i=this;var h=i.MCTarget;var j=i.style;if(!g){g=i.style.cursor||"default"}i.selectable=f;if(f){i.style.cursor=g=="default"?"auto":g;i.style.imeMode="auto";i.style.webkitUserSelect="";i.style.MozUserSelect="";h.unselectable="";h.onselectstart=null;h.ondragstart=null}else{i.clearSelection();i.style.cursor=g||"default";i.style.imeMode="disabled";i.style.webkitUserSelect="none";i.style.MozUserSelect="none";h.unselectable="on";h.onselectstart=d.prototype.disabledSelectText;h.ondragstart=d.prototype.disabledSelectText}};e.setHTML=function(f){var g=this;g.MCTarget.innerHTML=f};e.recreateTargetProp=function(f,g){var h=f[g];if(h!=undefined){for(var i in h){delete h[i]}}else{f[g]=new Object()}};e.clonePropsTo=function(f,g){var l=this;if(f instanceof Array){var h=f.length;for(var i=0;i<h;i++){var j=f[i];if(j instanceof Array){var k=g[i];if(k){k.length=0}else{g[i]=[]}l.clonePropsTo(j,g[i])}else if(typeof (j)=="object"){l.recreateTargetProp(g,i);l.clonePropsTo(j,g[i])}else{g[i]=j}}}else{for(var i in f){var j=f[i];if(j instanceof Array){var k=g[i];if(k){k.length=0}else{g[i]=[]}l.clonePropsTo(j,g[i])}else if(typeof (j)=="object"){l.recreateTargetProp(g,i);l.clonePropsTo(j,g[i])}else{g[i]=j}}}};e.setFramePropTo=function(f,g){var k=this;for(var h in f){var i=f[h];if(i instanceof Array){var j=k[h];if(j){j.length=0}else{k[h]=[]}k.clonePropsTo(i,k[h])}else if(typeof (i)=="object"){k.recreateTargetProp(k,h);k.clonePropsTo(i,k[h])}else{if(i==undefined&&k[h]!=undefined){k[h]=null}else{k[h]=i}}}};e.gotoAndStopPFrame=function(f){var g=this;if(!g.pTimeline){return}var h=g.pTimeline.frames;var i=g.pTimeline.selectframe;var j=h.length;if(j>0&&f<j){g.setFramePropTo(h[f],g);g.pTimeline.selectframe=f;var k=g.MCTarget.childNodes;var j=k.length;for(var l=0;l<j;l++){var m=k[l];if(m.nodeType==1&&m.proxy){m.proxy.gotoAndStopPFrame(0)}}g.draw()}};e.gotoAndStop=function(f){var g=this;g.clearLaterFrame(g.play,g);if(!g.timeline){return}f--;var h=g.timeline.frames;var i=g.timeline.selectframe;var j=h.length;if(j>0&&f<j){g.setFramePropTo(h[f],g);g.timeline.selectframe=f;var k=g.MCTarget.childNodes;var j=k.length;for(var l=0;l<j;l++){var m=k[l];if(m.nodeType==1&&m.proxy){m.proxy.gotoAndStopPFrame(f)}}g.draw()}};e.play=function(){var f=this;if(!f.timeline){return}var g=f.timeline.frames;var h=g.length;if(h<2){return}var i=f.timeline.selectframe;if(i+1>h-1){i=0}else{i++}f.gotoAndStop(i+1);var j=1;var k=f.presetFrameRate;if(k&&k<a.framerate){j=Math.round(a.framerate/k)}f.callLaterFrame(f.play,j,f)};e.stop=function(){var f=this;f.clearLaterFrame(f.play,f)};e.getCurrentFrame=function(){var f=this;if(!f.timeline){return -1}return f.timeline.selectframe+1};kiscore.MCProxy=d}());if(isIE6||isIE7||isIE8){b=MCProxy.prototype;b.getPos=function(){var $=this;var _=$.MCTarget;var a=$.MCTarget.parentNode;if(_.offsetParent==a&&a){return {x:_.offsetLeft,y:_.offsetTop}}else{return {x:_.offsetLeft-a.offsetLeft,y:_.offsetTop-a.offsetTop}}};b.setPosition=function(_){var $=this;if(_=="relative"||_=="static" ||_=="fixed"){$.style.position=_;$.position=_}else{$.style.position="absolute";$.position=_}};b.fixIEAlpha=function(){var _=this;if(_.style.filter.indexOf("alpha(opacity")==-1){_.style.filter+="alpha(opacity="+(_.alpha*100)+")"}else{_.MCTarget.filters.item("alpha").Opacity=_.alpha*100}};b.fixIEMatrix=function(_){var $=this;if($.style.filter.indexOf("DXImageTransform.Microsoft.Matrix(")==-1){if(!(_.M11==1&&_.M12==0&&_.M21==0&&_.M22==1)){$.style.filter+="progid:DXImageTransform.Microsoft.Matrix(M11="+_.M11+",M21="+_.M21+",M12="+_.M12+",M22="+_.M22+",Dx="+_.Dx+",Dy="+_.Dy+",SizingMethod='auto expand')"}}else{var a=$.MCTarget.filters.item("DXImageTransform.Microsoft.Matrix");if(_.M11==1&&_.M12==0&&_.M21==0&&_.M22==1){a.enabled=false}else{a.enabled=true;a.M11=_.M11;a.M12=_.M12;a.M21=_.M21;a.M22=_.M22;a.Dx=_.Dx;a.Dy=_.Dy}}};b.setAlpha=function(_){var $=this;if(_!=$.i_l_alpha){$.alpha=_;$.fixIEAlpha();$.i_l_alpha=_}};b.setMatrix=function(_){var $=this;$.fixIEMatrix(_)};b.drawMatrix=function(){var $=this;var _=$.rotation;var a=$.scaleX;var c=$.scaleY;$.IEMFX=0;$.IEMFY=0;if($.i_l_rotation!=_||$.i_l_scaleX!=a||$.i_l_scaleY!=c){var d=Math.cos(_*KIS_P_180),e=Math.sin(_*KIS_P_180);$.setMatrix({M11:d*a,M12:-e*c,M21:e*a,M22:d*c});$.i_l_rotation=_;$.i_l_scaleX=a;$.i_l_scaleY=c;$.IEMFX=$.x+($.width-$.MCTarget.offsetWidth)/2;$.IEMFY=$.y+($.height-$.MCTarget.offsetHeight)/2}};b.local2Global=function(_,$,a){var c=this;if(!_)_={x:0,y:0};$=$||c;if($.MCTarget)$=$.MCTarget;if(a&&a.MCTarget)a=a.MCTarget;var d=$.offsetLeft;var e=$.offsetTop;var f=$;$=$.offsetParent;if(!($&&$.tagName.toLowerCase()!="body"&&$!=a)){_.x+=d;_.y+=e;return _}var g=c.getCurrentStyle;_.x+=d;_.y+=e;while($&&$.tagName.toLowerCase()!="body"&&$!=a){_.x+=$.offsetLeft-$.scrollLeft+Number(g("borderLeftWidth","border-left-width",$).replace(/[a-z]/g,""));_.y+=$.offsetTop-$.scrollTop+Number(g("borderTopWidth","border-top-width",$).replace(/[a-z]/g,""));$=$.offsetParent}return _};b.setVisible=function(_){var $=this;$.visible=_;var a=$.style.styleFloat;if(isIE6&&(a=="left"||a=="right")){$.style.display=$.visible?"inline":"none"}else{$.style.display=$.visible?"":"none"}};b.move=function(_,$){var a=this;if(a.i_l_x==_&&a.i_l_y==$)return;var c=(typeof (_)=="string"?1:0);var d=(typeof ($)=="string"?1:0);var e=c?"":"px";var f=d?"":"px";a.x=_;a.y=$;if(isNaN(_)&&e)_=0;if(isNaN($)&&f)$=0;if(!c){_+=a.IEMFX}if(!d){$+=a.IEMFY}if(a.style.position!="absolute"){var g=a.style.styleFloat;var h=g=="right"?"marginRight":"marginLeft";var i=g=="right"?"marginLeft":"marginRight";if(isIE6&&(g=="left"||g=="right")){if(a.getVisible()){a.setStyle("display","inline")}}a.setStyle(h,_+e);a.setStyle(i,"0px");var j=a.right;var k=a.bottom;if(j>0){a.style.marginRight=(typeof (j)=="string"?j:j+"px")}a.style.marginTop=$+f;a.style.marginBottom=(typeof (k)=="string"?k:k+"px");if(a.style.posTop==undefined){a.style.left="0px";a.style.top="0px"}}else{a.style.left=_+e;a.style.top=$+f;if(a.style.margin!="")a.style.margin=""}a.i_l_x=a.x;a.i_l_y=a.y}};(function(){"use strict";function Stage(_){var $=this;$.callSuperMethod(Stage.super_p.k_ctor);if(!_){$.activeMouseMove();var a=$;var b=function(){if(a.delayResize){a.callLaterFrame(s.onWindowResizeBase,s.delayResize,s)}else{a.onWindowResizeBase()}};if(window.attachEvent){window.attachEvent("onresize",b)}else{window.addEventListener("resize",b)}}var c=$.getStageSize();$.width=c.width;$.height=c.height}var b=Stage.prototype;b.k_init=function(){var _=this;_.callSuperMethod(Stage.super_p.k_init);_.style.position=""};b.createMCTarget=function(_){var $=this;$.MCTarget=document.body;$.MCTarget.proxy=$;document.proxy=$;$.style=$.MCTarget.style};b.activeMouseMove=function(){var _=this;_.interactive(document,[["onmousemove","mousemove","onMouseMove"]])};b.addETL=function(_,$,a,b){var c=this;if(!b)c.interactive(document,[["on"+_,_]]);c.addEventListener(_,$,a)};b.removeETL=function(_,$,a,b){var c=this;c.removeEventListener(_,$,a);if(!c.hasEventListener(_)){if(!b)c.uninteractive(document,[["on"+_,_]])}};b.onWindowResizeBase=function(){var $=this;var _=$.getStageSize();$.width=_.width;$.height=_.height;$.dispatchEvent(new kiscore.KEvent("resize"))};b.setBackgroundColor=function(_){var $=this;$.style.backgroundColor=_};b.local2Global=function(_){return _};b.getStageSize=function(){var _=window.innerHeight||document.documentElement.clientHeight;var $=window.innerWidth||document.documentElement.clientWidth;if(_<=0){return {width:document.body.clientWidth,height:document.body.clientHeight}}else{return {width:$,height:_}}};b.eval=function(val){if(isIE)window.execScript(val);else window.eval(val)};b.clearSelection=function(_){if(window.getSelection){var $=window.getSelection();if($&&$.toString()){if(_){if(!$.containsNode(_,true)){return}}$.removeAllRanges()}}else{document.selection.empty()}};KISU.extend(Stage,kiscore.MCProxy);kiscore.Stage=Stage}());